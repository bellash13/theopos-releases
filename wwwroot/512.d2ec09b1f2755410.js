(self.webpackChunktheopos=self.webpackChunktheopos||[]).push([[512],{2826:(Q,P,s)=>{"use strict";s.d(P,{e:()=>e});var C=s(1135),y=s(2291),h=s(1223);let e=(()=>{class t{constructor(d,A,T){this.periodsServ=d,this.currenciesServ=A,this.centersServ=T,this.period$=new C.X(null),this.subPeriod$=new C.X(null),this.currency$=new C.X(null),this.center$=new C.X(null),this.initialize()}initialize(){const d=localStorage.getItem("period$");d&&this.loadPeriod(+d);const A=localStorage.getItem("currency$");A&&this.loadCurrency(+A);const T=localStorage.getItem("center$");T&&this.loadCenter(+T)}setPeriod(d){this.period$.next(d),localStorage.setItem("period$",((null==d?void 0:d.periodId)||"")+""),this.unloadSubPeriod()}setSubPeriod(d){this.subPeriod$.next(d),localStorage.setItem("subPeriod$",((null==d?void 0:d.subPeriodId)||"")+"")}setCurrency(d){this.currency$.next(d),localStorage.setItem("currency$",((null==d?void 0:d.currencyId)||"")+"")}setCenter(d){this.center$.next(d),localStorage.setItem("center$",((null==d?void 0:d.centerId)||"")+"")}loadPeriod(d){this.periodsServ.details(d).subscribe(A=>{this.setPeriod(A)})}loadCurrency(d){this.currenciesServ.details(d).subscribe(A=>{this.setCurrency(A)})}loadCenter(d){this.centersServ.details(d).subscribe(A=>{this.setCenter(A)})}unloadPeriod(){this.setPeriod(null)}unloadSubPeriod(){this.setSubPeriod(null)}unloadCurrency(){this.setCurrency(null)}unloadCenter(){this.setCenter(null)}}return t.\u0275fac=function(d){return new(d||t)(h.LFG(y.gy),h.LFG(y.sV),h.LFG(y.BL))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},512:(Q,P,s)=>{"use strict";s.r(P),s.d(P,{AccountingModule:()=>we});var C=s(2611),y=s(9808),h=s(2291),e=s(1223),t=s(2826),r=s(2680),d=s(1218),A=s(1230),T=s(9150),f=s(1656),_=s(4327),p=s(2382),v=s(7418),U=s(5439),Y=s(2290),L=s(9356);function M(o,a){1&o&&(e.TgZ(0,"div",19),e._uU(1,"Le code est requis."),e.qZA())}function D(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,M,2,0,"div",8),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.periodId.errors.required)}}function m(o,a){1&o&&(e.TgZ(0,"div",19),e._uU(1," Valeur invalide "),e.qZA())}function g(o,a){1&o&&(e.TgZ(0,"div",19),e._uU(1,"D\xe9signation requise."),e.qZA())}function Z(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,g,2,0,"div",8),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.name.errors.required)}}function q(o,a){1&o&&(e.TgZ(0,"div",19),e._uU(1,"Date d'ouverture est requise."),e.qZA())}function I(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,q,2,0,"div",8),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.startDate.errors.required)}}function N(o,a){1&o&&(e.TgZ(0,"div",19),e._uU(1,"Date de cl\xf4ture requise."),e.qZA())}function O(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,N,2,0,"div",8),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.endDate.errors.required)}}function B(o,a){if(1&o&&(e.TgZ(0,"div")(1,"label",20),e._UZ(2,"input",21),e._uU(3),e.qZA()()),2&o){const n=a.$implicit;e.xp6(2),e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.displayName," ")}}function k(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"button",22),e._uU(2,"Cr\xe9er"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.periodForm.invalid)}}function l(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"button",22),e._uU(2,"Sauvegarder"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.periodForm.invalid)}}function F(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.savePeriod())}),e.TgZ(3,"div")(4,"div",3)(5,"label",4),e._uU(6,"Code"),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"input",6),e.YNc(9,D,2,1,"div",0),e.qZA()(),e.TgZ(10,"div",3)(11,"label",4),e._uU(12,"Statut"),e.qZA(),e.TgZ(13,"div",5)(14,"div")(15,"label"),e._UZ(16,"input",7),e._uU(17),e.qZA()(),e.YNc(18,m,2,0,"div",8),e.qZA()(),e.TgZ(19,"div",3)(20,"label",9),e._uU(21,"D\xe9signation"),e.qZA(),e.TgZ(22,"div",5),e._UZ(23,"input",10),e.YNc(24,Z,2,1,"div",0),e.qZA()(),e.TgZ(25,"div",3)(26,"label",11),e._uU(27,"Ouverture"),e.qZA(),e.TgZ(28,"div",5),e._UZ(29,"input",12),e.YNc(30,I,2,1,"div",0),e.qZA()(),e.TgZ(31,"div",3)(32,"label",13),e._uU(33,"Cl\xf4ture"),e.qZA(),e.TgZ(34,"div",5),e._UZ(35,"input",14),e.YNc(36,O,2,1,"div",0),e.qZA()(),e.TgZ(37,"div",3)(38,"label",15),e._uU(39,"Subdivision"),e.qZA(),e.TgZ(40,"div",5),e.YNc(41,B,4,2,"div",16),e.qZA()(),e.TgZ(42,"div",3)(43,"div",17),e.YNc(44,k,3,1,"ng-container",0),e.YNc(45,l,3,1,"ng-container",0),e.TgZ(46,"button",18),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(47,"Retourner"),e.qZA()()()()()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("formGroup",n.periodForm),e.xp6(7),e.Q6J("ngIf",n.periodForm.controls.periodId.invalid&&(n.periodForm.controls.periodId.dirty||n.periodForm.controls.periodId.touched)),e.xp6(8),e.hij(" ",n.periodForm.controls.isClosed.value?"Cl\xf4tur\xe9e":"Ouverte",""),e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.isClosed.invalid&&(n.periodForm.controls.isClosed.dirty||n.periodForm.controls.isClosed.touched)),e.xp6(6),e.Q6J("ngIf",n.periodForm.controls.name.invalid&&(n.periodForm.controls.name.dirty||n.periodForm.controls.name.touched)),e.xp6(6),e.Q6J("ngIf",n.periodForm.controls.startDate.invalid&&(n.periodForm.controls.startDate.dirty||n.periodForm.controls.startDate.touched)),e.xp6(6),e.Q6J("ngIf",n.periodForm.controls.endDate.invalid&&(n.periodForm.controls.endDate.dirty||n.periodForm.controls.endDate.touched)),e.xp6(5),e.Q6J("ngForOf",n.subPeriodTypes),e.xp6(3),e.Q6J("ngIf","create"===n.viewMode),e.xp6(1),e.Q6J("ngIf","edit"===n.viewMode)}}function i(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",23)(2,"table",24)(3,"thead")(4,"tr"),e._UZ(5,"th"),e.TgZ(6,"th"),e._uU(7,"Code"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"D\xe9signation"),e.qZA(),e.TgZ(10,"th",25),e._uU(11,"Ouverture"),e.qZA(),e.TgZ(12,"th",25),e._uU(13,"Cl\xf4ture"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Statut"),e.qZA()(),e.TgZ(16,"tr"),e._UZ(17,"th"),e.TgZ(18,"th"),e._uU(19,"periodId"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"name"),e.qZA(),e.TgZ(22,"th",25),e._uU(23,"startDate"),e.qZA(),e.TgZ(24,"th",25),e._uU(25,"endDate"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"isClosed"),e.qZA()()()(),e.TgZ(28,"div",26)(29,"div",27)(30,"button",28),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.download(0,1))}),e._UZ(31,"i",29),e._uU(32," T\xe9l\xe9charger mod\xe8le "),e.qZA()(),e.TgZ(33,"div",27)(34,"input",30),e.NdJ("change",function(u){e.CHM(n);const x=e.oxw();return e.KtG(x.upload(u))}),e.qZA()()(),e.TgZ(35,"div",31)(36,"button",18),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(37,"Retourner"),e.qZA()()(),e.BQk()}}function b(o,a){1&o&&(e.ynx(0),e._UZ(1,"i",40),e.BQk())}function E(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",41),e.NdJ("click",function(){e.CHM(n);const u=e.oxw().$implicit,x=e.oxw(2);return e.KtG(x.deletePeriod(u.periodId))}),e._UZ(2,"i",42),e.qZA(),e.BQk()}}const J=function(o){return{"bg-light":o}};function R(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"tr",37)(1,"td")(2,"button",38),e.NdJ("click",function(){const x=e.CHM(n).$implicit,S=e.oxw(2);return e.KtG(S.select(x))}),e._UZ(3,"i",39),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td",25),e._uU(9),e.ALo(10,"momentDate"),e.qZA(),e.TgZ(11,"td",25),e._uU(12),e.ALo(13,"momentDate"),e.qZA(),e._UZ(14,"td"),e.TgZ(15,"td",23),e.YNc(16,b,2,0,"ng-container",0),e.YNc(17,E,3,0,"ng-container",0),e.qZA()()}if(2&o){const n=a.$implicit,c=e.oxw(2);e.Q6J("ngClass",e.VKq(13,J,c.currentPeriod&&c.currentPeriod.periodId===n.periodId)),e.xp6(5),e.Oqu(n.periodId),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(e.xi3(10,7,n.startDate,c.settings.momentDateFormat)),e.xp6(3),e.Oqu(e.xi3(13,10,n.endDate,c.settings.momentDateFormat)),e.xp6(4),e.Q6J("ngIf",n.isClosed),e.xp6(1),e.Q6J("ngIf",!n.isClosed)}}function j(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"table",24)(2,"thead")(3,"tr"),e._UZ(4,"th"),e.TgZ(5,"th"),e._uU(6,"Code"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"D\xe9signation"),e.qZA(),e.TgZ(9,"th",25),e._uU(10,"Ouverture"),e.qZA(),e.TgZ(11,"th",25),e._uU(12,"Cl\xf4ture"),e.qZA(),e._UZ(13,"th"),e.TgZ(14,"th")(15,"button",32),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openAdd())}),e._UZ(16,"i",33),e.qZA()()()(),e.TgZ(17,"tbody"),e.YNc(18,R,18,15,"tr",34),e.qZA()(),e.TgZ(19,"div",23)(20,"button",35),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openImport())}),e._uU(21,"Importer"),e.qZA(),e.TgZ(22,"button",36),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.download(u.pageIndex,u.pageSize))}),e._uU(23,"Exporter"),e.qZA()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(18),e.Q6J("ngForOf",n.periods)}}const W=function(o){return{"bg-info text-white":o}};function z(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"tr",37)(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td",25),e._uU(5),e.ALo(6,"momentDate"),e.qZA(),e.TgZ(7,"td",25),e._uU(8),e.ALo(9,"momentDate"),e.qZA()(),e.BQk()),2&o){const n=a.$implicit,c=e.oxw(4);e.xp6(1),e.Q6J("ngClass",e.VKq(10,W,c.currentSubPeriod&&c.currentSubPeriod.subPeriodId===n.subPeriodId)),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(e.xi3(6,4,n.startDate,c.settings.momentDateFormat)),e.xp6(3),e.Oqu(e.xi3(9,7,n.endDate,c.settings.momentDateFormat))}}function V(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"h4"),e._uU(2,"PERIODES COMPTABLES"),e.qZA(),e.TgZ(3,"table",24)(4,"thead")(5,"tr")(6,"th"),e._uU(7,"D\xe9signation"),e.qZA(),e.TgZ(8,"th",25),e._uU(9,"D\xe9but"),e.qZA(),e.TgZ(10,"th",25),e._uU(11,"Fin"),e.qZA()()(),e.YNc(12,z,10,12,"ng-container",16),e.qZA(),e.BQk()),2&o){const n=e.oxw(3);e.xp6(12),e.Q6J("ngForOf",n.currentPeriod.subPeriods)}}function X(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",3)(2,"label",4),e._uU(3,"Code"),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA()(),e.TgZ(6,"div",3)(7,"label",4),e._uU(8,"Statut"),e.qZA(),e.TgZ(9,"div",5),e._uU(10),e.qZA()(),e.TgZ(11,"div",3)(12,"label",9),e._uU(13,"D\xe9signation"),e.qZA(),e.TgZ(14,"div",5),e._uU(15),e.qZA()(),e.TgZ(16,"div",3)(17,"label",11),e._uU(18,"Ouverture"),e.qZA(),e.TgZ(19,"div",5),e._uU(20),e.ALo(21,"momentDate"),e.qZA()(),e.TgZ(22,"div",3)(23,"label",13),e._uU(24,"Cl\xf4ture"),e.qZA(),e.TgZ(25,"div",5),e._uU(26),e.ALo(27,"momentDate"),e.qZA()(),e.YNc(28,V,13,1,"ng-container",0),e.BQk()),2&o){const n=e.oxw(2);e.xp6(5),e.Oqu(n.currentPeriod.periodId),e.xp6(5),e.Oqu(n.currentPeriod.isClosed?"Cl\xf4tur\xe9e":"Ouverte"),e.xp6(5),e.Oqu(n.currentPeriod.name),e.xp6(5),e.Oqu(e.xi3(21,6,n.currentPeriod.startDate,n.settings.momentDateFormat)),e.xp6(6),e.Oqu(e.xi3(27,9,n.currentPeriod.endDate,n.settings.momentDateFormat)),e.xp6(2),e.Q6J("ngIf",n.currentPeriod.subPeriods)}}function ee(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",43),e.NdJ("click",function(){e.CHM(n);const u=e.oxw(2);return e.KtG(u.openEdit())}),e._uU(2,"Editer"),e.qZA(),e.BQk()}}function te(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div"),e.YNc(2,X,29,12,"ng-container",0),e.TgZ(3,"div",3)(4,"div",17),e.YNc(5,ee,3,0,"ng-container",0),e.TgZ(6,"button",18),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(7,"Retourner"),e.qZA()()()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.currentPeriod),e.xp6(3),e.Q6J("ngIf",n.currentPeriod)}}let $=(()=>{class o{constructor(n,c,u,x){this.periodService=n,this.accountingServ=c,this.formBuilder=u,this.toastr=x,this.periods=[],this.viewMode="list",this.subPeriodTypes=[{value:h.mT.Yearly,displayName:"Annuelle"},{value:h.mT.BiAnnualy,displayName:"Semestrielle"},{value:h.mT.Quarterly,displayName:"Trimestrielle"},{value:h.mT.Monthly,displayName:"Mensuelle"},{value:h.mT.Daily,displayName:"Journali\xe8re"}],this.settings=v.X,this.subscriptions=[],this.pageIndex=0,this.pageSize=20,this.buildForm()}buildForm(){var n,c;const u=this.currentPeriod;this.periodForm=this.formBuilder.group({periodId:[(null==u?void 0:u.periodId)||"",[p.kI.required]],name:[(null==u?void 0:u.name)||"",[p.kI.required,p.kI.maxLength(30)]],subPeriodsType:[(null==u?void 0:u.subPeriodsType)||"",[]],isClosed:[(null==u?void 0:u.isClosed)||!1],startDate:[U((null===(n=null==u?void 0:u.startDate)||void 0===n?void 0:n.toDate())||new Date).format("YYYY-MM-DD"),[p.kI.required]],endDate:[U((null===(c=null==u?void 0:u.endDate)||void 0===c?void 0:c.toDate())||new Date).format("YYYY-MM-DD"),[p.kI.required]]})}ngOnInit(){this.sessionify(),this.getPeriods()}ngOnDestroy(){this.subscriptions.forEach(n=>{n&&n.unsubscribe()})}sessionify(){const n=this.accountingServ.period$.subscribe(u=>{this.currentPeriod=u,this.buildForm()});this.subscriptions.push(n);const c=this.accountingServ.subPeriod$.subscribe(u=>{this.currentSubPeriod=u});this.subscriptions.push(c)}getPeriods(){this.periodService.index(this.pageIndex,this.pageSize,"").subscribe(n=>this.periods=n)}openAdd(){this.currentPeriod=null,this.buildForm(),this.viewMode="create"}openEdit(){this.viewMode="edit"}openList(){this.viewMode="list",this.getPeriods()}openImport(){this.viewMode="import"}savePeriod(){const n=this.periodForm.value;n.startDate=U.utc(n.startDate,"YYYY-MM-DD").format(),n.endDate=U.utc(n.endDate,"YYYY-MM-DD").format();const c=new h.F2;c.init(n),console.log({period:c,value:n}),"create"===this.viewMode&&this.periodService.create(c).subscribe(u=>{c.isClosed=!1;const x=new h.F2(u);this.periods.push(x),this.select(x)}),"edit"===this.viewMode&&this.periodService.edit(c.periodId,c).subscribe(u=>{const x=new h.F2(u),S=this.periods.findIndex(K=>K.periodId===x.periodId);-1!==S&&(this.periods[S]=x,this.currentPeriod=this.periods[S]),this.viewMode="list"})}select(n){this.accountingServ.loadPeriod(n.periodId),this.viewMode="details"}selectSubPeriod(n){this.accountingServ.setSubPeriod(n)}unselectSubPeriod(){this.accountingServ.unloadSubPeriod()}unselect(){this.accountingServ.unloadPeriod(),this.openList()}deletePeriod(n){this.viewMode="delete",this.periodService.delete(n).subscribe(c=>{this.periods=this.periods.filter(u=>u.periodId!==n),this.unselect(),this.openList()},c=>{this.toastr.error("Action rejet\xe9e, r\xe9essayer plus tard!"),console.error(c)})}download(n=0,c=12){this.periodService.download(n,c,"csv").subscribe(u=>{(0,_.saveAs)(u.data,u.fileName||"period-template.csv")})}upload(n){const c=n.target;if(c.files&&c.files.length>0){const u=c.files[0];this.periodService.bulkCreate({data:u,fileName:u.name}).subscribe(S=>{this.toastr.success("Action effectu\xe9e avec succ\xe8s."),this.openList()})}}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(h.gy),e.Y36(t.e),e.Y36(p.qu),e.Y36(Y._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-period"]],decls:7,vars:4,consts:[[4,"ngIf"],[1,"card-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mt-2","row"],["for","periodId",1,"col-md-4","text-end"],[1,"col-md-8"],["type","text","id","periodId","formControlName","periodId",1,"form-control","form-control-sm"],["type","checkbox","id","isClosed","formControlName","isClosed",1,"me-2"],["class","text-danger",4,"ngIf"],["for","name",1,"col-md-4","text-end"],["type","text","id","name","formControlName","name",1,"form-control","form-control-sm"],["for","startDate",1,"col-md-4","text-end"],["type","date","id","startDate","formControlName","startDate",1,"form-control","form-control-sm"],["for","endDate",1,"col-md-4","text-end"],["type","date","id","endDate","formControlName","endDate",1,"form-control","form-control-sm"],[1,"col-md-4","text-end"],[4,"ngFor","ngForOf"],[1,"offset-md-4","col-md-8"],["type","submit",1,"btn","btn-sm","btn-outline-secondary","ms-2",3,"click"],[1,"text-danger"],[1,"me=2","mb-1"],["type","radio","formControlName","subPeriodsType",1,"me-2",3,"value"],["type","submit",1,"btn","btn-sm","btn-success",3,"disabled"],[1,"text-center"],[1,"table"],[1,"text-end"],[1,"row","pt-4","text-center"],[1,"col-md-6"],["type","button","title","T\xe9l\xe9charger mod\xe8le",1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-file-csv"],["type","file",1,"form-control",3,"change"],[1,"mt-2"],["type","button","title","Cr\xe9er une p\xe9riode",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"fa","fa-plus"],[3,"ngClass",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-light","me-2",3,"click"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],[3,"ngClass"],["title","S\xe9lectionner",1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"fa","fa-lock"],["title","Supprimer",1,"btn","btn-danger","btn-sm","ms-2",3,"click"],[1,"fa","fa-times"],["type","submit",1,"btn","btn-sm","btn-outline-warning",3,"click"]],template:function(n,c){1&n&&(e.TgZ(0,"h4"),e._uU(1,"PERIODES COMPTABLES"),e.qZA(),e._UZ(2,"hr"),e.YNc(3,F,48,10,"ng-container",0),e.YNc(4,i,38,0,"ng-container",0),e.YNc(5,j,24,1,"ng-container",0),e.YNc(6,te,8,2,"ng-container",0)),2&n&&(e.xp6(3),e.Q6J("ngIf","create"===c.viewMode||"edit"===c.viewMode),e.xp6(1),e.Q6J("ngIf","import"===c.viewMode),e.xp6(1),e.Q6J("ngIf","list"===c.viewMode),e.xp6(1),e.Q6J("ngIf","details"===c.viewMode))},dependencies:[y.mk,y.sg,y.O5,p._Y,p.Fj,p.Wl,p._,p.JJ,p.JL,p.sg,p.u,L.v]}),o})();function ne(o,a){1&o&&(e.TgZ(0,"div",16),e._uU(1,"Le nom est requis."),e.qZA())}function oe(o,a){1&o&&(e.TgZ(0,"div",16),e._uU(1,"Le nom ne peut pas d\xe9passer 30 caract\xe8res. "),e.qZA())}function re(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ne,2,0,"div",15),e.YNc(2,oe,2,0,"div",15),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.centerForm.controls.name.errors.required),e.xp6(1),e.Q6J("ngIf",n.centerForm.controls.name.errors.maxlength)}}function ie(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"button",17),e._uU(2,"Cr\xe9er"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.centerForm.invalid)}}function ce(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"button",17),e._uU(2,"Sauvegarder"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.centerForm.invalid)}}function se(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.saveCenter())}),e.TgZ(3,"div")(4,"div",3)(5,"label",4),e._uU(6,"Nom"),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"input",6),e.YNc(9,re,3,2,"div",0),e.qZA()(),e.TgZ(10,"div",3)(11,"label",7),e._uU(12,"Description"),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"textarea",8),e.qZA()(),e.TgZ(15,"div",3)(16,"label",9),e._uU(17,"Type de centre"),e.qZA(),e.TgZ(18,"div",5)(19,"div")(20,"label",10),e._UZ(21,"input",11),e._uU(22," Co\xfbts "),e.qZA(),e.TgZ(23,"label",10),e._UZ(24,"input",11),e._uU(25," Profits "),e.qZA(),e.TgZ(26,"label",10),e._UZ(27,"input",11),e._uU(28," Co\xfbts et profits "),e.qZA()()()(),e.TgZ(29,"div",12)(30,"div",13),e.YNc(31,ie,3,1,"ng-container",0),e.YNc(32,ce,3,1,"ng-container",0),e.TgZ(33,"button",14),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(34,"Retourner"),e.qZA()()()()()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("formGroup",n.centerForm),e.xp6(7),e.Q6J("ngIf",n.centerForm.controls.name.invalid&&(n.centerForm.controls.name.dirty||n.centerForm.controls.name.touched)),e.xp6(12),e.Q6J("value",!1)("checked",!1===n.centerForm.controls.isCostCenter.value),e.xp6(3),e.Q6J("value",!0)("checked",!0===n.centerForm.controls.isCostCenter.value),e.xp6(3),e.Q6J("value",null)("checked",null===n.centerForm.controls.isCostCenter.value),e.xp6(4),e.Q6J("ngIf","create"===n.viewMode),e.xp6(1),e.Q6J("ngIf","edit"===n.viewMode)}}function ue(o,a){1&o&&(e.ynx(0),e._uU(1," Co\xfbts "),e.BQk())}function de(o,a){1&o&&(e.ynx(0),e._uU(1," Profits "),e.BQk())}function ae(o,a){1&o&&(e.ynx(0),e._uU(1," Co\xfbts et profits "),e.BQk())}function le(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"button",22),e.NdJ("click",function(){const x=e.CHM(n).$implicit,S=e.oxw(2);return e.KtG(S.select(x))}),e._UZ(3,"i",23),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e.YNc(11,ue,2,0,"ng-container",0),e.YNc(12,de,2,0,"ng-container",0),e.YNc(13,ae,2,0,"ng-container",0),e.qZA(),e.TgZ(14,"td",24)(15,"button",25),e.NdJ("click",function(){const x=e.CHM(n).$implicit,S=e.oxw(2);return e.KtG(S.deleteCenter(x.centerId))}),e._UZ(16,"i",26),e.qZA()()()}if(2&o){const n=a.$implicit;e.xp6(5),e.Oqu(n.centerId),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.description),e.xp6(2),e.Q6J("ngIf",!0===n.isCostCenter),e.xp6(1),e.Q6J("ngIf",!1===n.isCostCenter),e.xp6(1),e.Q6J("ngIf",null===n.isCostCenter)}}function _e(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"table",18)(2,"thead")(3,"tr"),e._UZ(4,"th"),e.TgZ(5,"th"),e._uU(6,"Code"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Nom"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Description"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Type"),e.qZA(),e.TgZ(13,"th")(14,"button",19),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openAdd())}),e._UZ(15,"i",20),e._uU(16," Ajouter "),e.qZA()()()(),e.TgZ(17,"tbody"),e.YNc(18,le,17,6,"tr",21),e.qZA()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(18),e.Q6J("ngForOf",n.centers)}}function me(o,a){1&o&&(e.ynx(0),e._uU(1," Co\xfbts "),e.BQk())}function pe(o,a){1&o&&(e.ynx(0),e._uU(1," Profits "),e.BQk())}function ge(o,a){1&o&&(e.ynx(0),e._uU(1," Co\xfbts et profits "),e.BQk())}function fe(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",3)(2,"label",27),e._uU(3,"Code"),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA()(),e.TgZ(6,"div",3)(7,"label",4),e._uU(8,"Nom"),e.qZA(),e.TgZ(9,"div",5),e._uU(10),e.qZA()(),e.TgZ(11,"div",3)(12,"label",7),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"div",5),e._uU(15),e.qZA()(),e.TgZ(16,"div",3)(17,"label",9),e._uU(18,"Type"),e.qZA(),e.TgZ(19,"div",5),e.YNc(20,me,2,0,"ng-container",0),e.YNc(21,pe,2,0,"ng-container",0),e.YNc(22,ge,2,0,"ng-container",0),e.qZA()(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(5),e.Oqu(n.currentCenter.centerId),e.xp6(5),e.Oqu(n.currentCenter.name),e.xp6(5),e.Oqu(n.currentCenter.description),e.xp6(5),e.Q6J("ngIf",!0===n.currentCenter.isCostCenter),e.xp6(1),e.Q6J("ngIf",!1===n.currentCenter.isCostCenter),e.xp6(1),e.Q6J("ngIf",null===n.currentCenter.isCostCenter)}}function ve(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(n);const u=e.oxw(2);return e.KtG(u.openEdit(u.currentCenter))}),e._uU(2,"Modifier"),e.qZA(),e.BQk()}}function Ce(o,a){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div"),e.YNc(2,fe,23,6,"ng-container",0),e.TgZ(3,"div",3)(4,"div",13),e.YNc(5,ve,3,0,"ng-container",0),e.TgZ(6,"button",14),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(7,"Retourner"),e.qZA()()()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.currentCenter),e.xp6(3),e.Q6J("ngIf",n.currentCenter)}}let H=(()=>{class o{constructor(n,c,u,x){this.centerService=n,this.accountingServ=c,this.formBuilder=u,this.toastr=x,this.centers=[],this.viewMode="list",this.subscriptions=[]}ngOnInit(){this.sessionify(),this.getCenters()}sessionify(){const n=this.accountingServ.center$.subscribe(c=>{this.currentCenter=c});this.subscriptions.push(n)}buildForm(){const n=this.currentCenter;this.centerForm=this.formBuilder.group({centerId:[(null==n?void 0:n.centerId)||0,[]],name:[(null==n?void 0:n.name)||"",[p.kI.required,p.kI.maxLength(30)]],description:[(null==n?void 0:n.description)||"",[p.kI.maxLength(255)]],isCostCenter:[(null==n?void 0:n.isCostCenter)||null]})}ngOnDestroy(){this.subscriptions.forEach(n=>{n&&n.unsubscribe()})}getCenters(){this.centerService.index().subscribe(n=>{this.centers=n})}openAdd(){this.currentCenter=null,this.buildForm(),this.viewMode="create"}openEdit(n){this.currentCenter=n,this.buildForm(),this.viewMode="edit"}openList(){this.viewMode="list",this.getCenters()}saveCenter(){if(!this.centerForm.valid)return void this.toastr.error("Formulaire invalide. Veuillez modififier svp.");const n=this.centerForm.value,c=new h.Xg;c.init(n),"create"===this.viewMode?this.createCenter(c):"edit"===this.viewMode&&this.editCenter(c)}createCenter(n){this.centerService.create(n).subscribe(c=>{const u=new h.Xg(c);this.centers.push(u),this.viewMode="list",this.toastr.success("Action effectu\xe9e avec succ\xe8s")},c=>{this.toastr.error("Une erreur est survenue lors de la cr\xe9ation du centre")})}editCenter(n){this.centerService.edit(n.centerId,n).subscribe(()=>{const c=this.centers.findIndex(u=>u.centerId===n.centerId);-1!==c&&(this.centers[c]=n),this.viewMode="list",this.toastr.success("Action effectu\xe9e avec succ\xe8s")},c=>{this.toastr.error("Une erreur est survenue lors de la modification du centre")})}select(n){this.accountingServ.loadCenter(n.centerId),this.viewMode="details"}unselect(){this.accountingServ.unloadCenter(),this.openList()}deleteCenter(n){this.viewMode="delete",this.centerService.delete(n).subscribe(()=>{this.centers=this.centers.filter(c=>c.centerId!==n),this.unselect()},c=>{this.toastr.error("Veuillez r\xe9essayer plus tard!"),console.error(c)})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(h.BL),e.Y36(t.e),e.Y36(p.qu),e.Y36(Y._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-center"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"card-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mt-2","row"],["for","name",1,"col-md-4","text-end"],[1,"col-md-8"],["type","text","id","name","formControlName","name",1,"form-control","form-control-sm"],["for","description",1,"col-md-4","text-end"],["id","description","formControlName","description",1,"form-control","form-control-sm"],["for","isCostCenter",1,"col-md-4","text-end"],[1,"me-2"],["type","radio","id","isCostCenter","name","isCostCenter","formControlName","isCostCenter",1,"me-2",3,"value","checked"],[1,"form-group","mt-4","row"],[1,"offset-md-4","col-md-8"],["type","submit",1,"btn","btn-sm","btn-outline-secondary","ms-2",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","submit",1,"btn","btn-sm","btn-success",3,"disabled"],[1,"table"],["type","button","title","Cr\xe9er un centre",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"fa","fa-plus"],[4,"ngFor","ngForOf"],["title","S\xe9lectionner",1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"text-center"],["title","Supprimer",1,"btn","btn-danger","btn-sm","ms-2",3,"click"],[1,"fa","fa-times"],["for","centerId",1,"col-md-4","text-end"],["type","submit",1,"btn","btn-sm","btn-outline-warning",3,"click"]],template:function(n,c){1&n&&(e.TgZ(0,"h4"),e._uU(1,"CENTRES"),e.qZA(),e._UZ(2,"hr"),e.YNc(3,se,35,10,"ng-container",0),e.YNc(4,_e,19,1,"ng-container",0),e.YNc(5,Ce,8,2,"ng-container",0)),2&n&&(e.xp6(3),e.Q6J("ngIf","create"===c.viewMode||"edit"===c.viewMode),e.xp6(1),e.Q6J("ngIf","list"===c.viewMode),e.xp6(1),e.Q6J("ngIf","details"===c.viewMode))},dependencies:[y.sg,y.O5,p._Y,p.Fj,p._,p.JJ,p.JL,p.sg,p.u]}),o})();function he(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2),e.qZA(),e.BQk()),2&o){const n=e.oxw();e.xp6(2),e.Oqu(n.currentJournal.name)}}function Ze(o,a){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",18),e.qZA())}function xe(o,a){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",19),e.qZA())}function ye(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2),e.YNc(3,Ze,2,0,"span",6),e.YNc(4,xe,2,0,"span",6),e.qZA(),e.BQk()),2&o){const n=e.oxw();e.xp6(2),e.hij("",n.currentPeriod.name," "),e.xp6(1),e.Q6J("ngIf",n.currentPeriod&&n.currentPeriod.isClosed),e.xp6(1),e.Q6J("ngIf",n.currentPeriod&&!n.currentPeriod.isClosed)}}function Te(o,a){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",8),e.qZA())}function be(o,a){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",20),e.qZA())}function Ae(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"app-period"),e.qZA(),e.TgZ(2,"div",22)(3,"button",23),e.NdJ("click",function(){const x=e.CHM(n).dismiss;return e.KtG(x("Cross click"))}),e._uU(4,"Terminer"),e.qZA()()}}function Ue(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2),e.qZA(),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("title",n.currentCurrency.name),e.xp6(1),e.Oqu(n.currentCurrency.code)}}function Ie(o,a){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",8),e.qZA())}function Ee(o,a){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",25),e.qZA())}function Me(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"app-currency-crud"),e.qZA(),e.TgZ(2,"div",22)(3,"button",23),e.NdJ("click",function(){const x=e.CHM(n).dismiss;return e.KtG(x("Cross click"))}),e._uU(4,"Terminer"),e.qZA()()}}function Fe(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2),e.qZA(),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("title",n.currentCenter.name),e.xp6(1),e.Oqu(n.currentCenter.name||n.currentCenter.centerId)}}function qe(o,a){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",8),e.qZA())}function Pe(o,a){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",26),e.qZA())}function De(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"app-center"),e.qZA(),e.TgZ(2,"div",22)(3,"button",23),e.NdJ("click",function(){const x=e.CHM(n).dismiss;return e.KtG(x("Cross click"))}),e._uU(4,"Terminer"),e.qZA()()}}function Se(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"a",27),e._UZ(2,"i"),e._uU(3),e.qZA(),e._uU(4," |\n"),e.BQk()),2&o){const n=a.$implicit;e.xp6(1),e.Q6J("routerLink",n.route),e.xp6(1),e.Tol(n.icon),e.xp6(1),e.hij(" ",n.text," ")}}const Je=[{path:"",redirectTo:"journals",pathMatch:"full"},{path:"",component:(()=>{class o{constructor(n,c,u,x){this.accountingServ=n,this.journalSession=c,this.navigationServ=u,this.modalService=x,this.subs=[],this.navs=[]}ngOnInit(){this.sessionify()}sessionify(){const n=this.navigationServ.navs$.subscribe(w=>{w.forEach((Qe,Ye)=>{var G;"accounting"===Qe.name&&this.navigationServ.updateNav((null===(G=w[Ye])||void 0===G?void 0:G.children)||[])})});this.subs.push(n);const c=this.navigationServ.navs$.subscribe(w=>{this.navs=w});this.subs.push(c);const u=this.accountingServ.period$.subscribe(w=>{this.currentPeriod=w});this.subs.push(u);const x=this.accountingServ.currency$.subscribe(w=>{this.currentCurrency=w});this.subs.push(x);const S=this.accountingServ.center$.subscribe(w=>{this.currentCenter=w});this.subs.push(S);const K=this.journalSession.journal$.subscribe(w=>{this.currentJournal=w});this.subs.push(K)}openSelectPeiod(n){this.modalService.open(n)}openSelectCurrency(n){this.modalService.open(n,{size:"xl"})}openSelectCenter(n){this.modalService.open(n)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(t.e),e.Y36(r.l),e.Y36(d.f),e.Y36(A.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-accounting"]],decls:52,vars:11,consts:[[1,"card","card-body","my-1"],[1,"row"],[1,"col-md-3"],[1,"card","card-body","p-1"],[1,"text-center"],[1,"btn-group"],[4,"ngIf"],["routerLink","/accounting/journals",1,"btn","btn-sm","btn-light","ms-2"],[1,"fa","fa-edit"],[1,"card","card-body","p-1",3,"click"],["title","S\xe9lectionner p\xe9riode","type","button",1,"btn","btn-sm","btn-light","ms2"],["periodContent",""],["title","S\xe9lectionner devise","type","button",1,"btn","btn-sm","btn-light","ms2"],["content",""],["title","S\xe9lectionner centre","type","button",1,"btn","btn-sm","btn-light","ms2"],["centerContent",""],[4,"ngFor","ngForOf"],[1,"btn","btn-sm"],[1,"fa","fa-lock"],[1,"fa","fa-unlock"],[1,"fa","fa-calendar"],[1,"modal-body"],[1,"modal-footer"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"btn","btn-sm",3,"title"],[1,"fa","fa-money"],[1,"fa","fa-home"],["routerLinkActive","active",3,"routerLink"]],template:function(n,c){if(1&n){const u=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"strong"),e._uU(6,"Journal"),e.qZA()(),e.TgZ(7,"div",5),e.YNc(8,he,3,1,"ng-container",6),e.TgZ(9,"a",7),e._UZ(10,"i",8),e.qZA()()()(),e.TgZ(11,"div",2)(12,"div",9),e.NdJ("click",function(){e.CHM(u);const S=e.MAs(22);return e.KtG(c.openSelectPeiod(S))}),e.TgZ(13,"div",4)(14,"strong"),e._uU(15,"Exercice"),e.qZA()(),e.TgZ(16,"div",5),e.YNc(17,ye,5,3,"ng-container",6),e.TgZ(18,"button",10),e.YNc(19,Te,2,0,"span",6),e.YNc(20,be,2,0,"span",6),e.qZA()()(),e.YNc(21,Ae,5,0,"ng-template",null,11,e.W1O),e.qZA(),e.TgZ(23,"div",2)(24,"div",9),e.NdJ("click",function(){e.CHM(u);const S=e.MAs(34);return e.KtG(c.openSelectCurrency(S))}),e.TgZ(25,"div",4)(26,"strong"),e._uU(27,"D\xe9vise"),e.qZA()(),e.TgZ(28,"div",5),e.YNc(29,Ue,3,2,"ng-container",6),e.TgZ(30,"button",12),e.YNc(31,Ie,2,0,"span",6),e.YNc(32,Ee,2,0,"span",6),e.qZA()()(),e.YNc(33,Me,5,0,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(35,"div",2)(36,"div",9),e.NdJ("click",function(){e.CHM(u);const S=e.MAs(46);return e.KtG(c.openSelectCenter(S))}),e.TgZ(37,"div",4)(38,"strong"),e._uU(39,"Centre"),e.qZA()(),e.TgZ(40,"div",5),e.YNc(41,Fe,3,2,"ng-container",6),e.TgZ(42,"button",14),e.YNc(43,qe,2,0,"span",6),e.YNc(44,Pe,2,0,"span",6),e.qZA()()(),e.YNc(45,De,5,0,"ng-template",null,15,e.W1O),e.qZA()()(),e.TgZ(47,"div",0),e._UZ(48,"router-outlet"),e.qZA(),e._UZ(49,"hr"),e._uU(50,"Theopos :: Comptabilit\xe9 :\n"),e.YNc(51,Se,5,4,"ng-container",16)}2&n&&(e.xp6(8),e.Q6J("ngIf",c.currentJournal),e.xp6(9),e.Q6J("ngIf",c.currentPeriod),e.xp6(2),e.Q6J("ngIf",c.currentPeriod),e.xp6(1),e.Q6J("ngIf",!c.currentPeriod),e.xp6(9),e.Q6J("ngIf",c.currentCurrency),e.xp6(2),e.Q6J("ngIf",c.currentCurrency),e.xp6(1),e.Q6J("ngIf",!c.currentCurrency),e.xp6(9),e.Q6J("ngIf",c.currentCenter),e.xp6(2),e.Q6J("ngIf",c.currentCenter),e.xp6(1),e.Q6J("ngIf",!c.currentCenter),e.xp6(7),e.Q6J("ngForOf",c.navs))},dependencies:[y.sg,y.O5,T.lC,T.yS,T.Od,f.E,$,H]}),o})(),children:[{path:"coa",title:"Plan comptable",loadChildren:()=>Promise.all([s.e(592),s.e(693)]).then(s.bind(s,5693)).then(o=>o.ChartOfAccountsModule)},{path:"budget",title:"Budget",loadChildren:()=>s.e(629).then(s.bind(s,8629)).then(o=>o.BudgetModule)},{path:"journals",title:"Journaux des \xe9critures",loadChildren:()=>s.e(187).then(s.bind(s,6187)).then(o=>o.JournalsModule)},{path:"gl",title:"Grand livre",loadChildren:()=>s.e(667).then(s.bind(s,1667)).then(o=>o.GeneralLedgerModule)},{path:"tb",title:"Balance g\xe9n\xe9rale",loadChildren:()=>Promise.all([s.e(592),s.e(558)]).then(s.bind(s,9558)).then(o=>o.TrialBalanceModule)},{path:"subledgers",title:"Balances auxiliaires",loadChildren:()=>s.e(859).then(s.bind(s,2859)).then(o=>o.SubLedgersModule)},{path:"fs",title:"\xc9tats financiers",loadChildren:()=>s.e(116).then(s.bind(s,3116)).then(o=>o.FinancialStatementsModule)},{path:"currencies",title:"D\xe9vises",loadChildren:()=>Promise.resolve().then(s.bind(s,489)).then(o=>o.CurrencyModule)},{path:"periods",title:"Exercices comptables",component:$},{path:"centers",title:"Centres",component:H},{path:"masterdata",title:"Param\xe8tres",loadChildren:()=>s.e(428).then(s.bind(s,1428)).then(o=>o.MasterdataModule)}]}];let Ne=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[T.Bz.forChild(Je),T.Bz]}),o})();var Oe=s(489);let we=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[y.ez,Ne,C.m,Oe.CurrencyModule]}),o})()},1656:(Q,P,s)=>{"use strict";s.d(P,{E:()=>k});var C=s(2382),y=s(4327),e=s(2291),t=s(1223),r=s(2826),d=s(2290),A=s(9808);function T(l,F){1&l&&(t.TgZ(0,"div",17),t._uU(1,"D\xe9signation requise."),t.qZA())}function f(l,F){if(1&l&&(t.TgZ(0,"div"),t.YNc(1,T,2,0,"div",16),t.qZA()),2&l){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.name.errors.required)}}function _(l,F){1&l&&(t.TgZ(0,"div",17),t._uU(1,"Identifiant requis."),t.qZA())}function p(l,F){if(1&l&&(t.TgZ(0,"div"),t.YNc(1,_,2,0,"div",16),t.qZA()),2&l){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.currencyId.errors.required)}}function v(l,F){1&l&&(t.TgZ(0,"div",17),t._uU(1,"Le code est requis."),t.qZA())}function U(l,F){if(1&l&&(t.TgZ(0,"div"),t.YNc(1,v,2,0,"div",16),t.qZA()),2&l){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.code.errors.required)}}function Y(l,F){1&l&&(t.TgZ(0,"div",17),t._uU(1,"L'identifiant code est requis."),t.qZA())}function L(l,F){if(1&l&&(t.TgZ(0,"div"),t.YNc(1,Y,2,0,"div",16),t.qZA()),2&l){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.currencyId.errors.required)}}function M(l,F){1&l&&(t.TgZ(0,"div",17),t._uU(1,"Le symb\xf4le est requis."),t.qZA())}function D(l,F){if(1&l&&(t.TgZ(0,"div"),t.YNc(1,M,2,0,"div",16),t.qZA()),2&l){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.symbol.errors.required)}}function m(l,F){if(1&l&&(t.ynx(0),t.TgZ(1,"button",18),t._uU(2,"Cr\xe9er"),t.qZA(),t.BQk()),2&l){const i=t.oxw(2);t.xp6(1),t.Q6J("disabled",i.currencyForm.invalid)}}function g(l,F){if(1&l&&(t.ynx(0),t.TgZ(1,"button",18),t._uU(2,"Sauvegarder"),t.qZA(),t.BQk()),2&l){const i=t.oxw(2);t.xp6(1),t.Q6J("disabled",i.currencyForm.invalid)}}function Z(l,F){if(1&l){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){t.CHM(i);const E=t.oxw();return t.KtG(E.saveCurrency())}),t.TgZ(3,"div")(4,"div",3)(5,"label",4),t._uU(6,"D\xe9signation"),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"input",6),t.YNc(9,f,2,1,"div",0),t.qZA()(),t.TgZ(10,"div",3)(11,"label",4),t._uU(12,"Identifiant"),t.qZA(),t.TgZ(13,"div",5),t._UZ(14,"input",7),t.YNc(15,p,2,1,"div",0),t.qZA()(),t.TgZ(16,"div",3)(17,"label",8),t._uU(18,"Code ISO"),t.qZA(),t.TgZ(19,"div",5),t._UZ(20,"input",9),t.YNc(21,U,2,1,"div",0),t.qZA()(),t.TgZ(22,"div",3)(23,"label",10),t._uU(24,"R\xe9f\xe9rence"),t.qZA(),t.TgZ(25,"div",5)(26,"label"),t._UZ(27,"input",11),t._uU(28),t.qZA(),t.YNc(29,L,2,1,"div",0),t.qZA()(),t.TgZ(30,"div",3)(31,"label",12),t._uU(32,"Symb\xf4le"),t.qZA(),t.TgZ(33,"div",5),t._UZ(34,"input",13),t.YNc(35,D,2,1,"div",0),t.qZA()(),t.TgZ(36,"div",3)(37,"div",14),t.YNc(38,m,3,1,"ng-container",0),t.YNc(39,g,3,1,"ng-container",0),t.TgZ(40,"button",15),t.NdJ("click",function(){t.CHM(i);const E=t.oxw();return t.KtG(E.openList())}),t._uU(41,"Retourner"),t.qZA()()()()()(),t.BQk()}if(2&l){const i=t.oxw();t.xp6(2),t.Q6J("formGroup",i.currencyForm),t.xp6(7),t.Q6J("ngIf",i.currencyForm.controls.name.invalid&&(i.currencyForm.controls.name.dirty||i.currencyForm.controls.name.touched)),t.xp6(6),t.Q6J("ngIf",i.currencyForm.controls.currencyId.invalid&&(i.currencyForm.controls.currencyId.dirty||i.currencyForm.controls.currencyId.touched)),t.xp6(6),t.Q6J("ngIf",i.currencyForm.controls.code.invalid&&(i.currencyForm.controls.code.dirty||i.currencyForm.controls.code.touched)),t.xp6(7),t.hij(" ",i.currencyForm.controls.isReference.value?"Oui":"Non",""),t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.currencyId.invalid&&(i.currencyForm.controls.currencyId.dirty||i.currencyForm.controls.currencyId.touched)),t.xp6(6),t.Q6J("ngIf",i.currencyForm.controls.symbol.invalid&&(i.currencyForm.controls.symbol.dirty||i.currencyForm.controls.symbol.touched)),t.xp6(3),t.Q6J("ngIf","create"===i.viewMode),t.xp6(1),t.Q6J("ngIf","edit"===i.viewMode)}}function q(l,F){if(1&l){const i=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"button",23),t.NdJ("click",function(){const J=t.CHM(i).$implicit,R=t.oxw(2);return t.KtG(R.select(J))}),t._UZ(3,"i",24),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td",25)(15,"button",26),t.NdJ("click",function(){const J=t.CHM(i).$implicit,R=t.oxw(2);return t.KtG(R.deleteCurrency(J.currencyId))}),t._UZ(16,"i",27),t.qZA()()()}if(2&l){const i=F.$implicit;t.xp6(5),t.Oqu(i.code),t.xp6(2),t.Oqu(i.name),t.xp6(2),t.Oqu(i.currencyId),t.xp6(2),t.Oqu(i.symbol),t.xp6(2),t.Oqu(i.isReference?"Oui":"Non")}}function I(l,F){if(1&l){const i=t.EpF();t.ynx(0),t.TgZ(1,"table",19)(2,"thead")(3,"tr"),t._UZ(4,"th"),t.TgZ(5,"th"),t._uU(6,"Code"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"D\xe9signation"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"ID"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Symb\xf4le"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"R\xe9f\xe9rence"),t.qZA(),t.TgZ(15,"th")(16,"button",20),t.NdJ("click",function(){t.CHM(i);const E=t.oxw();return t.KtG(E.openAdd())}),t._UZ(17,"i",21),t.qZA()()()(),t.TgZ(18,"tbody"),t.YNc(19,q,17,5,"tr",22),t.qZA()(),t.BQk()}if(2&l){const i=t.oxw();t.xp6(19),t.Q6J("ngForOf",i.currencies)}}function N(l,F){if(1&l&&(t.ynx(0),t.TgZ(1,"div",3)(2,"label",4),t._uU(3,"D\xe9signation"),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.qZA()(),t.TgZ(6,"div",3)(7,"label",8),t._uU(8,"Code"),t.qZA(),t.TgZ(9,"div",5),t._uU(10),t.qZA()(),t.TgZ(11,"div",3)(12,"label",28),t._uU(13,"Identifiant"),t.qZA(),t.TgZ(14,"div",5),t._uU(15),t.qZA()(),t.TgZ(16,"div",3)(17,"label",4),t._uU(18,"Symb\xf4le"),t.qZA(),t.TgZ(19,"div",5),t._uU(20),t.qZA()(),t.BQk()),2&l){const i=t.oxw(2);t.xp6(5),t.Oqu(i.currentCurrency.name),t.xp6(5),t.Oqu(i.currentCurrency.code),t.xp6(5),t.Oqu(i.currentCurrency.currencyId),t.xp6(5),t.Oqu(i.currentCurrency.symbol)}}function O(l,F){if(1&l){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",29),t.NdJ("click",function(){t.CHM(i);const E=t.oxw(2);return t.KtG(E.openEdit())}),t._uU(2,"Editer"),t.qZA(),t.BQk()}}function B(l,F){if(1&l){const i=t.EpF();t.ynx(0),t.TgZ(1,"div"),t.YNc(2,N,21,4,"ng-container",0),t.TgZ(3,"div",3)(4,"div",14),t.YNc(5,O,3,0,"ng-container",0),t.TgZ(6,"button",15),t.NdJ("click",function(){t.CHM(i);const E=t.oxw();return t.KtG(E.openList())}),t._uU(7,"Retourner"),t.qZA()()()(),t.BQk()}if(2&l){const i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.currentCurrency),t.xp6(3),t.Q6J("ngIf",i.currentCurrency)}}let k=(()=>{class l{constructor(i,b,E,J){this.currencyService=i,this.accountingSession=b,this.formBuilder=E,this.toastr=J,this.currencies=[],this.viewMode="list",this.subscriptions=[],this.pageSize=0,this.pageCount=20,this.keyword="",this.buildForm()}buildForm(){const i=this.currentCurrency;this.currencyForm=this.formBuilder.group({currencyId:[(null==i?void 0:i.currencyId)||"",[]],isReference:[(null==i?void 0:i.isReference)||!1,[]],code:[(null==i?void 0:i.code)||"",[C.kI.required,C.kI.maxLength(3)]],name:[(null==i?void 0:i.name)||"",[C.kI.required,C.kI.maxLength(30)]],symbol:[(null==i?void 0:i.symbol)||"",[C.kI.maxLength(3)]],isActive:[(null==i?void 0:i.isActive)||!1]})}ngOnInit(){this.getCurrencies(),this.sessionify()}ngOnDestroy(){this.subscriptions.forEach(i=>{i&&i.unsubscribe()})}sessionify(){const i=this.accountingSession.currency$.subscribe(b=>{this.currentCurrency=b,this.buildForm()});this.subscriptions.push(i)}getCurrencies(){this.currencyService.index(void 0,this.keyword,this.pageSize,this.pageCount,"").subscribe(i=>{this.currencies=i})}openAdd(){this.currentCurrency=null,this.buildForm(),this.viewMode="create"}openEdit(){this.buildForm(),this.viewMode="edit"}openList(){this.viewMode="list",this.getCurrencies()}select(i){this.viewMode="details",this.accountingSession.loadCurrency(i.currencyId)}unselect(){this.accountingSession.unloadCurrency(),this.openList()}saveCurrency(){const i=this.currencyForm.value,b=new e.$C;b.init(i),"create"===this.viewMode&&this.currencyService.create(b).subscribe(E=>{this.toastr.success("Action effectu\xe9e avec succ\xe8s");const J=new e.$C;J.init(E),this.currencies.push(J),this.select(J)}),"edit"===this.viewMode&&this.currencyService.edit(b.currencyId,b).subscribe(E=>{this.toastr.success("Action effectu\xe9e avec succ\xe8s");const J=this.currencies.findIndex(R=>R.currencyId===E.currencyId);-1!==J&&(this.currencies[J]=E,this.currentCurrency=new e.GI,this.currentCurrency.init(this.currencies[J])),this.viewMode="list"})}deleteCurrency(i){this.viewMode="delete",this.currencyService.delete(i).subscribe(b=>{this.currencies=this.currencies.filter(E=>E.currencyId!==i),this.toastr.success("Action effectu\xe9e avec succ\xe8s"),this.unselect(),this.openList()},b=>{this.toastr.error("Veuillez r\xe9essayer plus tard!"),console.error(b)})}download(i=0,b=20){this.currencyService.download(i,b,"csv").subscribe(E=>{(0,y.saveAs)(E.data,E.fileName||"currency-template.csv")})}upload(i){const b=i.target;if(b.files&&b.files.length>0){const E=b.files[0];this.currencyService.bulkCreate({data:E,fileName:E.name}).subscribe(R=>{this.toastr.success("Action effectu\xe9e avec succ\xe8s."),this.openList()})}}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(e.sV),t.Y36(r.e),t.Y36(C.qu),t.Y36(d._W))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-currency-crud"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"card-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mt-2","row"],["for","name",1,"col-md-4","text-end"],[1,"col-md-8"],["type","text","id","name","formControlName","name",1,"form-control","form-control-sm"],["type","text","id","currencyId","formControlName","currencyId",1,"form-control","form-control-sm"],["for","code",1,"col-md-4","text-end"],["type","text","id","code","formControlName","code",1,"form-control","form-control-sm"],["for","isReference",1,"col-md-4","text-end"],["type","checkbox","id","isReference","formControlName","isReference",1,"me-2"],["for","symbol",1,"col-md-4","text-end"],["type","text","id","symbol","formControlName","symbol",1,"form-control","form-control-sm"],[1,"offset-md-4","col-md-8"],["type","submit",1,"btn","btn-sm","btn-outline-secondary","ms-2",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","submit",1,"btn","btn-sm","btn-success",3,"disabled"],[1,"table"],["type","button","title","Cr\xe9er une devise",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"fa","fa-plus"],[4,"ngFor","ngForOf"],["type","button","title","S\xe9lectionner",1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"text-center"],["title","Supprimer",1,"btn","btn-danger","btn-sm","ms-2",3,"click"],[1,"fa","fa-times"],["for","currencyId",1,"col-md-4","text-end"],["type","submit",1,"btn","btn-sm","btn-outline-warning",3,"click"]],template:function(i,b){1&i&&(t.TgZ(0,"h4"),t._uU(1,"DEVISES"),t.qZA(),t._UZ(2,"hr"),t.YNc(3,Z,42,9,"ng-container",0),t.YNc(4,I,20,1,"ng-container",0),t.YNc(5,B,8,2,"ng-container",0)),2&i&&(t.xp6(3),t.Q6J("ngIf","create"===b.viewMode||"edit"===b.viewMode),t.xp6(1),t.Q6J("ngIf","list"===b.viewMode),t.xp6(1),t.Q6J("ngIf","details"===b.viewMode))},dependencies:[A.sg,A.O5,C._Y,C.Fj,C.Wl,C.JJ,C.JL,C.sg,C.u]}),l})()},7501:(Q,P,s)=>{"use strict";s.d(P,{H:()=>L});var C=s(5439),h=s(8372),e=s(2291),t=s(7418),r=s(1223),d=s(2382),A=s(2290),T=s(1230),f=s(9808);function _(M,D){if(1&M&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&M){const m=D.$implicit;r.Q6J("value",m.currencyId),r.xp6(1),r.Oqu(m.name)}}function p(M,D){if(1&M&&(r.TgZ(0,"th"),r._uU(1),r.qZA()),2&M){const m=D.$implicit;r.xp6(1),r.hij(" 1 ",m.code,"")}}function v(M,D){if(1&M){const m=r.EpF();r.TgZ(0,"td")(1,"div",24)(2,"span",25),r._uU(3),r.qZA(),r.TgZ(4,"input",26),r.NdJ("ngModelChange",function(Z){const I=r.CHM(m).$implicit,N=r.oxw().$implicit;return r.KtG(N[I.code]=Z)}),r.qZA(),r.TgZ(5,"span",25),r._uU(6),r.qZA()()()}if(2&M){const m=D.$implicit,g=r.oxw().$implicit,Z=r.oxw();r.xp6(3),r.hij("1 ",m.code," ="),r.xp6(1),r.Q6J("ngModel",g[m.code]),r.xp6(2),r.AsE("",null==Z.selectedCurrency?null:Z.selectedCurrency.code,"(",null==Z.selectedCurrency?null:Z.selectedCurrency.symbol,")")}}function U(M,D){if(1&M&&(r.TgZ(0,"tr",23)(1,"td"),r._uU(2),r.ALo(3,"date"),r.qZA(),r.YNc(4,v,7,4,"td",19),r.qZA()),2&M){const m=D.$implicit,g=D.index,Z=r.oxw();r.Q6J("id","row-"+g),r.xp6(2),r.Oqu(r.xi3(3,3,m.day,Z.settings.dateFormat)),r.xp6(2),r.Q6J("ngForOf",Z.baseCurrencies)}}function Y(M,D){if(1&M){const m=r.EpF();r.ynx(0),r.TgZ(1,"div",27)(2,"div",4)(3,"div",28)(4,"button",29),r.NdJ("click",function(){r.CHM(m);const Z=r.oxw();return r.KtG(Z.saveChanges())}),r._UZ(5,"i",30),r._uU(6," Save Changes"),r.qZA()(),r.TgZ(7,"div",31)(8,"button",32),r.NdJ("click",function(){r.CHM(m);const Z=r.oxw();return r.KtG(Z.exportExcel())}),r._UZ(9,"i",33),r._uU(10," Export Excel"),r.qZA()()()(),r.BQk()}}let L=(()=>{class M{constructor(m,g,Z,q,I){this.ratesService=m,this.currenciesService=g,this.fb=Z,this.toastr=q,this.activeModal=I,this.rates=[],this.allCurrencies=[],this.baseCurrencies=[],this.refCurrencies=[],this.matrix=[],this.settings=t.X,this.subs=[]}ngAfterViewInit(){this.rate||(this.rate=new e.KH,this.rate.init({day:C(new Date)}));const m=this.rateForm.get("day");null==m||m.setValue(this.rate.day.format("YYYY-MM-DD")),null==m||m.updateValueAndValidity()}ngOnDestroy(){this.subs.forEach(m=>{m.unsubscribe()})}ngOnInit(){this.loadCurrencies(),this.buildForm()}buildForm(){var m,g;this.rateForm=this.fb.group({idTargetCurrency:[""],day:[""]}),null===(m=this.rateForm.get("idTargetCurrency"))||void 0===m||m.valueChanges.pipe((0,h.b)(200)).subscribe(Z=>{const q=+Z;this.selectedCurrency=this.refCurrencies.find(I=>I.currencyId===+q),this.baseCurrencies=this.allCurrencies.filter(I=>I.currencyId!==q),this.loadRates()}),null===(g=this.rateForm.get("day"))||void 0===g||g.valueChanges.pipe((0,h.b)(1e3)).subscribe(Z=>{this.loadRates()})}loadCurrencies(){const m=this.currenciesService.index().subscribe(g=>{var Z,q;this.allCurrencies=g,this.refCurrencies=g.filter(I=>!0===I.isReference),null===(Z=this.rateForm.get("idTargetCurrency"))||void 0===Z||Z.setValue(null===(q=this.refCurrencies[0])||void 0===q?void 0:q.currencyId)});this.subs.push(m)}loadRates(){var m,g;this.rates=[];const Z=null===(m=this.rateForm.get("day"))||void 0===m?void 0:m.value;this.selectedDay=C(Z),this.selectedCurrency&&this.selectedDay?this.ratesService.findRates(null===(g=this.selectedCurrency)||void 0===g?void 0:g.currencyId,this.selectedDay).subscribe(q=>{this.rates=q,this.buildMatrix();const I=this.matrix.findIndex(N=>C(N.day).isSame(this.selectedDay,"day"));if(-1!==I){const O=document.getElementById(`row-${I}`);O&&O.scrollIntoView({behavior:"smooth"})}}):this.buildMatrix()}buildMatrix(){if(this.matrix=[],!this.selectedCurrency||!this.selectedDay)return;const m=this.selectedDay.year(),g=this.selectedDay.month(),Z=new Date(m,g,1),q=new Date(Z.getTime());q.setMonth(q.getMonth()+1);let I=new Date(Z.getTime());for(;I<q;){const N={};N.day=C(I),this.baseCurrencies.forEach(O=>{var B;if(O.currencyId!==(null===(B=this.selectedCurrency)||void 0===B?void 0:B.currencyId)){const k=this.rates.find(l=>{var F;return l.idBaseCurrency===O.currencyId&&l.idTargetCurrency===(null===(F=this.selectedCurrency)||void 0===F?void 0:F.currencyId)&&C(l.day).isSame(C(I),"day")});N[O.code]=k?k.rateValue:""}}),this.matrix.push(N),I=new Date(I.getTime()),I=C(I).add(1,"days").toDate()}}saveChanges(){const m=[];this.matrix.forEach(g=>{const Z=C(g.day);this.baseCurrencies.forEach(q=>{var I;const N=(null===(I=this.selectedCurrency)||void 0===I?void 0:I.currencyId)||0,O=q.currencyId||0,B=g[q.code];if(B&&N!=O){const k=new e.KH;k.init({idTargetCurrency:N,idBaseCurrency:O,day:Z,rateValue:B}),m.push(k)}})}),this.ratesService.edit(m).subscribe(g=>{var Z;this.toastr.success("Action effectu\xe9e avec succ\xe8s"),null===(Z=this.activeModal)||void 0===Z||Z.close(this.rate)})}exportExcel(){console.log("Exporting Excel...")}importExcel(){console.log("Importing Excel...")}}return M.\u0275fac=function(m){return new(m||M)(r.Y36(e.Cp),r.Y36(e.sV),r.Y36(d.qu),r.Y36(A._W),r.Y36(T.Kz,8))},M.\u0275cmp=r.Xpm({type:M,selectors:[["app-currency-rates"]],inputs:{rate:"rate"},decls:37,vars:6,consts:[[1,"p-4"],[1,"card-title","text-uppercase"],[1,"card","card-body"],[3,"formGroup"],[1,"row"],[1,"form-group","col"],["for","idTargetCurrency"],["id","idTargetCurrency","formControlName","idTargetCurrency",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["for","day"],["type","date","id","day","formControlName","day",1,"form-control","form-control-sm"],["for","action"],["type","button",1,"btn","btn-sm","btn-outline-info",3,"click"],[1,"fa","fa-refresh"],[1,"form-group","col","text-end","pt-2"],["type","button","title","Importer",1,"btn","border","btn-sm","btn-light","ms-2",3,"click"],[1,"fa","fa-file-excel-o"],[1,"matrix","mt-1",2,"max-height","340px","overflow","hidden","overflow-y","auto"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[3,"id",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[3,"id"],[1,"input-group","input-group-sm"],[1,"input-group-text"],[1,"form-control","text-end",3,"ngModel","ngModelChange"],[1,"card","card-body","mt-1"],[1,"col","text-end"],["type","button",1,"btn","btn-success","me-2",3,"click"],[1,"fa","fa-save"],[1,"col-md-3","text-end"],["type","button",1,"btn","btn-light","border",3,"click"],[1,"fa","fa-download"]],template:function(m,g){1&m&&(r.TgZ(0,"div",0)(1,"h4",1),r._uU(2),r.qZA(),r.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"div")(8,"label",6),r._uU(9,"D\xe9vise"),r.qZA()(),r.TgZ(10,"select",7),r.YNc(11,_,2,2,"option",8),r.qZA()(),r.TgZ(12,"div",5)(13,"div")(14,"label",9),r._uU(15,"Jour"),r.qZA()(),r._UZ(16,"input",10),r.qZA(),r.TgZ(17,"div",5)(18,"div")(19,"label",11),r._uU(20,"Action"),r.qZA()(),r.TgZ(21,"button",12),r.NdJ("click",function(){return g.loadRates()}),r._UZ(22,"i",13),r._uU(23," Charger taux "),r.qZA()(),r.TgZ(24,"div",14)(25,"button",15),r.NdJ("click",function(){return g.importExcel()}),r._UZ(26,"i",16),r.qZA()()()()(),r.TgZ(27,"div",17)(28,"table",18)(29,"thead")(30,"tr")(31,"th"),r._uU(32,"Date"),r.qZA(),r.YNc(33,p,2,1,"th",19),r.qZA()(),r.TgZ(34,"tbody"),r.YNc(35,U,5,6,"tr",20),r.qZA()()(),r.YNc(36,Y,11,0,"ng-container",21),r.qZA()),2&m&&(r.xp6(2),r.hij("TAUX DE CHANGE ",null==g.selectedCurrency?null:g.selectedCurrency.code,""),r.xp6(2),r.Q6J("formGroup",g.rateForm),r.xp6(7),r.Q6J("ngForOf",g.refCurrencies),r.xp6(22),r.Q6J("ngForOf",g.baseCurrencies),r.xp6(2),r.Q6J("ngForOf",g.matrix),r.xp6(1),r.Q6J("ngIf",g.matrix&&g.matrix.length))},dependencies:[f.sg,f.O5,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.On,d.sg,d.u,f.uU]}),M})()},489:(Q,P,s)=>{"use strict";s.r(P),s.d(P,{CurrencyModule:()=>f});var C=s(9808),y=s(9150),h=s(1223);let e=(()=>{class _{constructor(){this.subs=[]}ngOnInit(){}ngOnDestroy(){this.subs.forEach(v=>{v&&v.unsubscribe()})}}return _.\u0275fac=function(v){return new(v||_)},_.\u0275cmp=h.Xpm({type:_,selectors:[["app-currency"]],decls:3,vars:0,template:function(v,U){1&v&&(h._UZ(0,"router-outlet")(1,"hr"),h._uU(2,"DEVISES\n"))},dependencies:[y.lC]}),_})();var t=s(7501);const d=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"",component:e,children:[{path:"list",component:s(1656).E},{path:"rates",component:t.H}]}];let A=(()=>{class _{}return _.\u0275fac=function(v){return new(v||_)},_.\u0275mod=h.oAB({type:_}),_.\u0275inj=h.cJS({imports:[y.Bz.forChild(d),y.Bz]}),_})();var T=s(2611);let f=(()=>{class _{}return _.\u0275fac=function(v){return new(v||_)},_.\u0275mod=h.oAB({type:_}),_.\u0275inj=h.cJS({imports:[C.ez,A,T.m]}),_})()},2680:(Q,P,s)=>{"use strict";s.d(P,{l:()=>e});var C=s(1135),y=s(1223),h=s(2291);let e=(()=>{class t{constructor(d){this.journalsServ=d,this.journal$=new C.X(null),this.initialize()}initialize(){const d=localStorage.getItem("journal$");d&&this.loadJournal(+d)}setJournal(d){this.journal$.next(d),localStorage.setItem("journal$",((null==d?void 0:d.journalId)||"")+"")}loadJournal(d){d?this.journalsServ.details(d).subscribe(A=>{this.setJournal(A)}):this.unloadJournal()}unloadJournal(){this.setJournal(null)}}return t.\u0275fac=function(d){return new(d||t)(y.LFG(h.yJ))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9356:(Q,P,s)=>{"use strict";s.d(P,{v:()=>y});var C=s(1223);let y=(()=>{class h{transform(t,r){return t?t.format(r):"-"}}return h.\u0275fac=function(t){return new(t||h)},h.\u0275pipe=C.Yjl({name:"momentDate",type:h,pure:!0}),h})()},7418:(Q,P,s)=>{"use strict";s.d(P,{X:()=>C});const C={momentDateFormat:"DD/MM/yyyy",momentDateHourFormat:"DD/MM \xe0 HH:mm",dateFormat:"dd/MM/yyyy",dateHourFormat:"dd/MM hh:mm",dateHourFullFormat:"dd/MM/yyyy hh:mm",numberFormat:".2"}},4327:function(Q,P){var y;void 0!==(y=function(){"use strict";function e(f,_,p){var v=new XMLHttpRequest;v.open("GET",f),v.responseType="blob",v.onload=function(){T(v.response,_,p)},v.onerror=function(){console.error("could not download file")},v.send()}function t(f){var _=new XMLHttpRequest;_.open("HEAD",f,!1);try{_.send()}catch(p){}return 200<=_.status&&299>=_.status}function r(f){try{f.dispatchEvent(new MouseEvent("click"))}catch(p){var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(_)}}var d="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,A=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),T=d.saveAs||("object"!=typeof window||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!A?function(f,_,p){var v=d.URL||d.webkitURL,U=document.createElement("a");U.download=_=_||f.name||"download",U.rel="noopener","string"==typeof f?(U.href=f,U.origin===location.origin?r(U):t(U.href)?e(f,_,p):r(U,U.target="_blank")):(U.href=v.createObjectURL(f),setTimeout(function(){v.revokeObjectURL(U.href)},4e4),setTimeout(function(){r(U)},0))}:"msSaveOrOpenBlob"in navigator?function(f,_,p){if(_=_||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(function h(f,_){return void 0===_?_={autoBom:!1}:"object"!=typeof _&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\ufeff",f],{type:f.type}):f}(f,p),_);else if(t(f))e(f,_,p);else{var v=document.createElement("a");v.href=f,v.target="_blank",setTimeout(function(){r(v)})}}:function(f,_,p,v){if((v=v||open("","_blank"))&&(v.document.title=v.document.body.innerText="downloading..."),"string"==typeof f)return e(f,_,p);var U="application/octet-stream"===f.type,Y=/constructor/i.test(d.HTMLElement)||d.safari,L=/CriOS\/[\d]+/.test(navigator.userAgent);if((L||U&&Y||A)&&"undefined"!=typeof FileReader){var M=new FileReader;M.onloadend=function(){var g=M.result;g=L?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=g:location=g,v=null},M.readAsDataURL(f)}else{var D=d.URL||d.webkitURL,m=D.createObjectURL(f);v?v.location=m:location.href=m,v=null,setTimeout(function(){D.revokeObjectURL(m)},4e4)}});d.saveAs=T.saveAs=T,Q.exports=T}.apply(P,[]))&&(Q.exports=y)},8372:(Q,P,s)=>{"use strict";s.d(P,{b:()=>e});var C=s(1566),y=s(4482),h=s(5403);function e(t,r=C.z){return(0,y.e)((d,A)=>{let T=null,f=null,_=null;const p=()=>{if(T){T.unsubscribe(),T=null;const U=f;f=null,A.next(U)}};function v(){const U=_+t,Y=r.now();if(Y<U)return T=this.schedule(void 0,U-Y),void A.add(T);p()}d.subscribe((0,h.x)(A,U=>{f=U,_=r.now(),T||(T=r.schedule(v,t),A.add(T))},()=>{p(),A.complete()},void 0,()=>{f=T=null}))})}}}]);