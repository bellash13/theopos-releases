(self.webpackChunktheopos=self.webpackChunktheopos||[]).push([[512],{2826:(Q,D,c)=>{"use strict";c.d(D,{e:()=>b});var v=c(1135),x=c(2291),e=c(1223);let b=(()=>{class t{constructor(a,h,E){this.periodsServ=a,this.currenciesServ=h,this.centersServ=E,this.period$=new v.X(null),this.currency$=new v.X(null),this.center$=new v.X(null),this.initialize()}initialize(){const a=localStorage.getItem("period$");a&&this.loadPeriod(+a);const h=localStorage.getItem("currency$");h&&this.loadCurrency(+h);const E=localStorage.getItem("center$");E&&this.loadCenter(+E)}setPeriod(a){this.period$.next(a),localStorage.setItem("period$",((null==a?void 0:a.periodId)||"")+"")}setCurrency(a){this.currency$.next(a),localStorage.setItem("currency$",((null==a?void 0:a.currencyId)||"")+"")}setCenter(a){this.center$.next(a),localStorage.setItem("center$",((null==a?void 0:a.centerId)||"")+"")}loadPeriod(a){this.periodsServ.details(a).subscribe(h=>{this.setPeriod(new x.F2(h))})}loadCurrency(a){this.currenciesServ.details(a).subscribe(h=>{this.setCurrency(h)})}loadCenter(a){this.centersServ.details(a).subscribe(h=>{this.setCenter(h)})}unloadPeriod(){this.setPeriod(null)}unloadCurrency(){this.setCurrency(null)}unloadCenter(){this.setCenter(null)}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(x.gy),e.LFG(x.sV),e.LFG(x.BL))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},512:(Q,D,c)=>{"use strict";c.r(D),c.d(D,{AccountingModule:()=>Se});var v=c(2611),x=c(9808),e=c(1223),b=c(2826),t=c(2680),r=c(1218),a=c(1230),h=c(9150),E=c(1656),g=c(4327),d=c(2382),y=c(2291),f=c(7418),A=c(5439),Y=c(2290),L=c(9356);function M(o,l){1&o&&(e.TgZ(0,"div",17),e._uU(1,"Le code est requis."),e.qZA())}function J(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,M,2,0,"div",8),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.periodId.errors.required)}}function p(o,l){1&o&&(e.TgZ(0,"div",17),e._uU(1," Valeur invalide "),e.qZA())}function m(o,l){1&o&&(e.TgZ(0,"div",17),e._uU(1,"D\xe9signation requise."),e.qZA())}function C(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,m,2,0,"div",8),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.name.errors.required)}}function q(o,l){1&o&&(e.TgZ(0,"div",17),e._uU(1,"Date d'ouverture est requise."),e.qZA())}function U(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,q,2,0,"div",8),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.startDate.errors.required)}}function O(o,l){1&o&&(e.TgZ(0,"div",17),e._uU(1,"Date de cl\xf4ture requise."),e.qZA())}function w(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,O,2,0,"div",8),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.endDate.errors.required)}}function k(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"button",18),e._uU(2,"Cr\xe9er"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.periodForm.invalid)}}function B(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"button",18),e._uU(2,"Sauvegarder"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.periodForm.invalid)}}function _(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.savePeriod())}),e.TgZ(3,"div")(4,"div",3)(5,"label",4),e._uU(6,"Code"),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"input",6),e.YNc(9,J,2,1,"div",0),e.qZA()(),e.TgZ(10,"div",3)(11,"label",4),e._uU(12,"Statut"),e.qZA(),e.TgZ(13,"div",5)(14,"div")(15,"label"),e._UZ(16,"input",7),e._uU(17),e.qZA()(),e.YNc(18,p,2,0,"div",8),e.qZA()(),e.TgZ(19,"div",3)(20,"label",9),e._uU(21,"D\xe9signation"),e.qZA(),e.TgZ(22,"div",5),e._UZ(23,"input",10),e.YNc(24,C,2,1,"div",0),e.qZA()(),e.TgZ(25,"div",3)(26,"label",11),e._uU(27,"Ouverture"),e.qZA(),e.TgZ(28,"div",5),e._UZ(29,"input",12),e.YNc(30,U,2,1,"div",0),e.qZA()(),e.TgZ(31,"div",3)(32,"label",13),e._uU(33,"Cl\xf4ture"),e.qZA(),e.TgZ(34,"div",5),e._UZ(35,"input",14),e.YNc(36,w,2,1,"div",0),e.qZA()(),e.TgZ(37,"div",3)(38,"div",15),e.YNc(39,k,3,1,"ng-container",0),e.YNc(40,B,3,1,"ng-container",0),e.TgZ(41,"button",16),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(42,"Retourner"),e.qZA()()()()()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("formGroup",n.periodForm),e.xp6(7),e.Q6J("ngIf",n.periodForm.controls.periodId.invalid&&(n.periodForm.controls.periodId.dirty||n.periodForm.controls.periodId.touched)),e.xp6(8),e.hij(" ",n.periodForm.controls.isClosed.value?"Cl\xf4tur\xe9e":"Ouverte",""),e.xp6(1),e.Q6J("ngIf",n.periodForm.controls.isClosed.invalid&&(n.periodForm.controls.isClosed.dirty||n.periodForm.controls.isClosed.touched)),e.xp6(6),e.Q6J("ngIf",n.periodForm.controls.name.invalid&&(n.periodForm.controls.name.dirty||n.periodForm.controls.name.touched)),e.xp6(6),e.Q6J("ngIf",n.periodForm.controls.startDate.invalid&&(n.periodForm.controls.startDate.dirty||n.periodForm.controls.startDate.touched)),e.xp6(6),e.Q6J("ngIf",n.periodForm.controls.endDate.invalid&&(n.periodForm.controls.endDate.dirty||n.periodForm.controls.endDate.touched)),e.xp6(3),e.Q6J("ngIf","create"===n.viewMode),e.xp6(1),e.Q6J("ngIf","edit"===n.viewMode)}}function F(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"table",20)(3,"thead")(4,"tr"),e._UZ(5,"th"),e.TgZ(6,"th"),e._uU(7,"Code"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"D\xe9signation"),e.qZA(),e.TgZ(10,"th",21),e._uU(11,"Ouverture"),e.qZA(),e.TgZ(12,"th",21),e._uU(13,"Cl\xf4ture"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Statut"),e.qZA()(),e.TgZ(16,"tr"),e._UZ(17,"th"),e.TgZ(18,"th"),e._uU(19,"periodId"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"name"),e.qZA(),e.TgZ(22,"th",21),e._uU(23,"startDate"),e.qZA(),e.TgZ(24,"th",21),e._uU(25,"endDate"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"isClosed"),e.qZA()()()(),e.TgZ(28,"div",22)(29,"div",23)(30,"button",24),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.download(0,1))}),e._UZ(31,"i",25),e._uU(32," T\xe9l\xe9charger mod\xe8le "),e.qZA()(),e.TgZ(33,"div",23)(34,"input",26),e.NdJ("change",function(u){e.CHM(n);const Z=e.oxw();return e.KtG(Z.upload(u))}),e.qZA()()(),e.TgZ(35,"div",27)(36,"button",16),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(37,"Retourner"),e.qZA()()(),e.BQk()}}function i(o,l){1&o&&(e.ynx(0),e._UZ(1,"i",36),e.BQk())}function T(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",37),e.NdJ("click",function(){e.CHM(n);const u=e.oxw().$implicit,Z=e.oxw(2);return e.KtG(Z.deletePeriod(u.periodId))}),e._UZ(2,"i",38),e.qZA(),e.BQk()}}const I=function(o){return{"bg-light":o}};function P(o,l){if(1&o){const n=e.EpF();e.TgZ(0,"tr",33)(1,"td")(2,"button",34),e.NdJ("click",function(){const Z=e.CHM(n).$implicit,S=e.oxw(2);return e.KtG(S.select(Z))}),e._UZ(3,"i",35),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td",21),e._uU(9),e.ALo(10,"momentDate"),e.qZA(),e.TgZ(11,"td",21),e._uU(12),e.ALo(13,"momentDate"),e.qZA(),e.TgZ(14,"td",19),e.YNc(15,i,2,0,"ng-container",0),e.YNc(16,T,3,0,"ng-container",0),e.qZA()()}if(2&o){const n=l.$implicit,s=e.oxw(2);e.Q6J("ngClass",e.VKq(13,I,s.currentPeriod&&s.currentPeriod.periodId===n.periodId)),e.xp6(5),e.Oqu(n.periodId),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(e.xi3(10,7,n.startDate,s.settings.momentDateFormat)),e.xp6(3),e.Oqu(e.xi3(13,10,n.endDate,s.settings.momentDateFormat)),e.xp6(3),e.Q6J("ngIf",n.isClosed),e.xp6(1),e.Q6J("ngIf",!n.isClosed)}}function R(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"table",20)(2,"thead")(3,"tr"),e._UZ(4,"th"),e.TgZ(5,"th"),e._uU(6,"Code"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"D\xe9signation"),e.qZA(),e.TgZ(9,"th",21),e._uU(10,"Ouverture"),e.qZA(),e.TgZ(11,"th",21),e._uU(12,"Cl\xf4ture"),e.qZA(),e._UZ(13,"th"),e.TgZ(14,"th")(15,"button",28),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openAdd())}),e._UZ(16,"i",29),e.qZA()()()(),e.TgZ(17,"tbody"),e.YNc(18,P,17,15,"tr",30),e.qZA()(),e.TgZ(19,"div",19)(20,"button",31),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openImport())}),e._uU(21,"Importer"),e.qZA(),e.TgZ(22,"button",32),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.download(u.pageIndex,u.pageSize))}),e._uU(23,"Exporter"),e.qZA()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(18),e.Q6J("ngForOf",n.periods)}}function $(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"div",3)(2,"label",4),e._uU(3,"Code"),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA()(),e.TgZ(6,"div",3)(7,"label",4),e._uU(8,"Statut"),e.qZA(),e.TgZ(9,"div",5),e._uU(10),e.qZA()(),e.TgZ(11,"div",3)(12,"label",9),e._uU(13,"D\xe9signation"),e.qZA(),e.TgZ(14,"div",5),e._uU(15),e.qZA()(),e.TgZ(16,"div",3)(17,"label",11),e._uU(18,"Ouverture"),e.qZA(),e.TgZ(19,"div",5),e._uU(20),e.ALo(21,"momentDate"),e.qZA()(),e.TgZ(22,"div",3)(23,"label",13),e._uU(24,"Cl\xf4ture"),e.qZA(),e.TgZ(25,"div",5),e._uU(26),e.ALo(27,"momentDate"),e.qZA()(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(5),e.Oqu(n.currentPeriod.periodId),e.xp6(5),e.Oqu(n.currentPeriod.isClosed?"Cl\xf4tur\xe9e":"Ouverte"),e.xp6(5),e.Oqu(n.currentPeriod.name),e.xp6(5),e.Oqu(e.xi3(21,5,n.currentPeriod.startDate,n.settings.momentDateFormat)),e.xp6(6),e.Oqu(e.xi3(27,8,n.currentPeriod.endDate,n.settings.momentDateFormat))}}function j(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(n);const u=e.oxw(2);return e.KtG(u.openEdit())}),e._uU(2,"Editer"),e.qZA(),e.BQk()}}function W(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div"),e.YNc(2,$,28,11,"ng-container",0),e.TgZ(3,"div",3)(4,"div",15),e.YNc(5,j,3,0,"ng-container",0),e.TgZ(6,"button",16),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(7,"Retourner"),e.qZA()()()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.currentPeriod),e.xp6(3),e.Q6J("ngIf",n.currentPeriod)}}let H=(()=>{class o{constructor(n,s,u,Z){this.periodService=n,this.accountingServ=s,this.formBuilder=u,this.toastr=Z,this.periods=[],this.viewMode="list",this.settings=f.X,this.subscriptions=[],this.pageIndex=0,this.pageSize=20,this.buildForm()}buildForm(){var n,s;const u=this.currentPeriod;this.periodForm=this.formBuilder.group({periodId:[(null==u?void 0:u.periodId)||"",[d.kI.required]],name:[(null==u?void 0:u.name)||"",[d.kI.required,d.kI.maxLength(30)]],isClosed:[(null==u?void 0:u.isClosed)||!1],startDate:[A((null===(n=null==u?void 0:u.startDate)||void 0===n?void 0:n.toDate())||new Date).format("YYYY-MM-DD"),[d.kI.required]],endDate:[A((null===(s=null==u?void 0:u.endDate)||void 0===s?void 0:s.toDate())||new Date).format("YYYY-MM-DD"),[d.kI.required]]})}ngOnInit(){this.sessionify(),this.getPeriods()}ngOnDestroy(){this.subscriptions.forEach(n=>{n&&n.unsubscribe()})}sessionify(){const n=this.accountingServ.period$.subscribe(s=>{this.currentPeriod=s,this.buildForm()});this.subscriptions.push(n)}getPeriods(){this.periodService.index(this.pageIndex,this.pageSize,"").subscribe(n=>this.periods=n)}openAdd(){this.currentPeriod=null,this.buildForm(),this.viewMode="create"}openEdit(){this.viewMode="edit"}openList(){this.viewMode="list",this.getPeriods()}openImport(){this.viewMode="import"}savePeriod(){const n=this.periodForm.value;n.startDate=new Date(n.startDate),n.endDate=new Date(n.endDate);const s=new y.F2;s.init(n),"create"===this.viewMode&&this.periodService.create(s).subscribe(u=>{s.isClosed=!1;const Z=new y.F2(u);this.periods.push(Z),this.select(Z)}),"edit"===this.viewMode&&this.periodService.edit(s.periodId,s).subscribe(u=>{const Z=new y.F2(u),S=this.periods.findIndex(K=>K.periodId===Z.periodId);-1!==S&&(this.periods[S]=Z,this.currentPeriod=this.periods[S]),this.viewMode="list"})}select(n){this.accountingServ.loadPeriod(n.periodId),this.viewMode="details"}unselect(){this.accountingServ.unloadPeriod(),this.openList()}deletePeriod(n){this.viewMode="delete",this.periodService.delete(n).subscribe(s=>{this.periods=this.periods.filter(u=>u.periodId!==n),this.unselect(),this.openList()},s=>{this.toastr.error("Veuilez r\xe9essayer plus tard!"),console.error(s)})}download(n=0,s=12){this.periodService.download(n,s,"csv").subscribe(u=>{(0,g.saveAs)(u.data,u.fileName||"period-template.csv")})}upload(n){const s=n.target;if(s.files&&s.files.length>0){const u=s.files[0];this.periodService.bulkCreate({data:u,fileName:u.name}).subscribe(S=>{this.toastr.success("Action effectu\xe9e avec succ\xe8s."),this.openList()})}}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(y.gy),e.Y36(b.e),e.Y36(d.qu),e.Y36(Y._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-period"]],decls:7,vars:4,consts:[[4,"ngIf"],[1,"card-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mt-2","row"],["for","periodId",1,"col-md-4","text-end"],[1,"col-md-8"],["type","text","id","periodId","formControlName","periodId",1,"form-control","form-control-sm"],["type","checkbox","id","isClosed","formControlName","isClosed",1,"me-2"],["class","text-danger",4,"ngIf"],["for","name",1,"col-md-4","text-end"],["type","text","id","name","formControlName","name",1,"form-control","form-control-sm"],["for","startDate",1,"col-md-4","text-end"],["type","date","id","startDate","formControlName","startDate",1,"form-control","form-control-sm"],["for","endDate",1,"col-md-4","text-end"],["type","date","id","endDate","formControlName","endDate",1,"form-control","form-control-sm"],[1,"offset-md-4","col-md-8"],["type","submit",1,"btn","btn-sm","btn-outline-secondary","ms-2",3,"click"],[1,"text-danger"],["type","submit",1,"btn","btn-sm","btn-success",3,"disabled"],[1,"text-center"],[1,"table"],[1,"text-end"],[1,"row","pt-4","text-center"],[1,"col-md-6"],["type","button","title","T\xe9l\xe9charger mod\xe8le",1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-file-csv"],["type","file",1,"form-control",3,"change"],[1,"mt-2"],["type","button","title","Cr\xe9er une p\xe9riode",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"fa","fa-plus"],[3,"ngClass",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-light","me-2",3,"click"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],[3,"ngClass"],["title","S\xe9lectionner",1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"fa","fa-lock"],["title","Supprimer",1,"btn","btn-danger","btn-sm","ms-2",3,"click"],[1,"fa","fa-times"],["type","submit",1,"btn","btn-sm","btn-outline-warning",3,"click"]],template:function(n,s){1&n&&(e.TgZ(0,"h4"),e._uU(1,"PERIODES COMPTABLES"),e.qZA(),e._UZ(2,"hr"),e.YNc(3,_,43,9,"ng-container",0),e.YNc(4,F,38,0,"ng-container",0),e.YNc(5,R,24,1,"ng-container",0),e.YNc(6,W,8,2,"ng-container",0)),2&n&&(e.xp6(3),e.Q6J("ngIf","create"===s.viewMode||"edit"===s.viewMode),e.xp6(1),e.Q6J("ngIf","import"===s.viewMode),e.xp6(1),e.Q6J("ngIf","list"===s.viewMode),e.xp6(1),e.Q6J("ngIf","details"===s.viewMode))},dependencies:[x.mk,x.sg,x.O5,d._Y,d.Fj,d.Wl,d.JJ,d.JL,d.sg,d.u,L.v]}),o})();function z(o,l){1&o&&(e.TgZ(0,"div",16),e._uU(1,"Le nom est requis."),e.qZA())}function V(o,l){1&o&&(e.TgZ(0,"div",16),e._uU(1,"Le nom ne peut pas d\xe9passer 30 caract\xe8res. "),e.qZA())}function X(o,l){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,z,2,0,"div",15),e.YNc(2,V,2,0,"div",15),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.centerForm.controls.name.errors.required),e.xp6(1),e.Q6J("ngIf",n.centerForm.controls.name.errors.maxlength)}}function ee(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"button",17),e._uU(2,"Cr\xe9er"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.centerForm.invalid)}}function te(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"button",17),e._uU(2,"Sauvegarder"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.centerForm.invalid)}}function ne(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.saveCenter())}),e.TgZ(3,"div")(4,"div",3)(5,"label",4),e._uU(6,"Nom"),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"input",6),e.YNc(9,X,3,2,"div",0),e.qZA()(),e.TgZ(10,"div",3)(11,"label",7),e._uU(12,"Description"),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"textarea",8),e.qZA()(),e.TgZ(15,"div",3)(16,"label",9),e._uU(17,"Type de centre"),e.qZA(),e.TgZ(18,"div",5)(19,"div")(20,"label",10),e._UZ(21,"input",11),e._uU(22," Co\xfbts "),e.qZA(),e.TgZ(23,"label",10),e._UZ(24,"input",11),e._uU(25," Profits "),e.qZA(),e.TgZ(26,"label",10),e._UZ(27,"input",11),e._uU(28," Co\xfbts et profits "),e.qZA()()()(),e.TgZ(29,"div",12)(30,"div",13),e.YNc(31,ee,3,1,"ng-container",0),e.YNc(32,te,3,1,"ng-container",0),e.TgZ(33,"button",14),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(34,"Retourner"),e.qZA()()()()()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("formGroup",n.centerForm),e.xp6(7),e.Q6J("ngIf",n.centerForm.controls.name.invalid&&(n.centerForm.controls.name.dirty||n.centerForm.controls.name.touched)),e.xp6(12),e.Q6J("value",!1)("checked",!1===n.centerForm.controls.isCostCenter.value),e.xp6(3),e.Q6J("value",!0)("checked",!0===n.centerForm.controls.isCostCenter.value),e.xp6(3),e.Q6J("value",null)("checked",null===n.centerForm.controls.isCostCenter.value),e.xp6(4),e.Q6J("ngIf","create"===n.viewMode),e.xp6(1),e.Q6J("ngIf","edit"===n.viewMode)}}function oe(o,l){1&o&&(e.ynx(0),e._uU(1," Co\xfbts "),e.BQk())}function re(o,l){1&o&&(e.ynx(0),e._uU(1," Profits "),e.BQk())}function ie(o,l){1&o&&(e.ynx(0),e._uU(1," Co\xfbts et profits "),e.BQk())}function ce(o,l){if(1&o){const n=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"button",22),e.NdJ("click",function(){const Z=e.CHM(n).$implicit,S=e.oxw(2);return e.KtG(S.select(Z))}),e._UZ(3,"i",23),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e.YNc(11,oe,2,0,"ng-container",0),e.YNc(12,re,2,0,"ng-container",0),e.YNc(13,ie,2,0,"ng-container",0),e.qZA(),e.TgZ(14,"td",24)(15,"button",25),e.NdJ("click",function(){const Z=e.CHM(n).$implicit,S=e.oxw(2);return e.KtG(S.deleteCenter(Z.centerId))}),e._UZ(16,"i",26),e.qZA()()()}if(2&o){const n=l.$implicit;e.xp6(5),e.Oqu(n.centerId),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.description),e.xp6(2),e.Q6J("ngIf",!0===n.isCostCenter),e.xp6(1),e.Q6J("ngIf",!1===n.isCostCenter),e.xp6(1),e.Q6J("ngIf",null===n.isCostCenter)}}function se(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"table",18)(2,"thead")(3,"tr"),e._UZ(4,"th"),e.TgZ(5,"th"),e._uU(6,"Code"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Nom"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Description"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Type"),e.qZA(),e.TgZ(13,"th")(14,"button",19),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openAdd())}),e._UZ(15,"i",20),e._uU(16," Ajouter "),e.qZA()()()(),e.TgZ(17,"tbody"),e.YNc(18,ce,17,6,"tr",21),e.qZA()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(18),e.Q6J("ngForOf",n.centers)}}function ue(o,l){1&o&&(e.ynx(0),e._uU(1," Co\xfbts "),e.BQk())}function de(o,l){1&o&&(e.ynx(0),e._uU(1," Profits "),e.BQk())}function ae(o,l){1&o&&(e.ynx(0),e._uU(1," Co\xfbts et profits "),e.BQk())}function le(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"div",3)(2,"label",27),e._uU(3,"Code"),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA()(),e.TgZ(6,"div",3)(7,"label",4),e._uU(8,"Nom"),e.qZA(),e.TgZ(9,"div",5),e._uU(10),e.qZA()(),e.TgZ(11,"div",3)(12,"label",7),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"div",5),e._uU(15),e.qZA()(),e.TgZ(16,"div",3)(17,"label",9),e._uU(18,"Type"),e.qZA(),e.TgZ(19,"div",5),e.YNc(20,ue,2,0,"ng-container",0),e.YNc(21,de,2,0,"ng-container",0),e.YNc(22,ae,2,0,"ng-container",0),e.qZA()(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(5),e.Oqu(n.currentCenter.centerId),e.xp6(5),e.Oqu(n.currentCenter.name),e.xp6(5),e.Oqu(n.currentCenter.description),e.xp6(5),e.Q6J("ngIf",!0===n.currentCenter.isCostCenter),e.xp6(1),e.Q6J("ngIf",!1===n.currentCenter.isCostCenter),e.xp6(1),e.Q6J("ngIf",null===n.currentCenter.isCostCenter)}}function _e(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(n);const u=e.oxw(2);return e.KtG(u.openEdit(u.currentCenter))}),e._uU(2,"Modifier"),e.qZA(),e.BQk()}}function pe(o,l){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div"),e.YNc(2,le,23,6,"ng-container",0),e.TgZ(3,"div",3)(4,"div",13),e.YNc(5,_e,3,0,"ng-container",0),e.TgZ(6,"button",14),e.NdJ("click",function(){e.CHM(n);const u=e.oxw();return e.KtG(u.openList())}),e._uU(7,"Retourner"),e.qZA()()()(),e.BQk()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.currentCenter),e.xp6(3),e.Q6J("ngIf",n.currentCenter)}}let me=(()=>{class o{constructor(n,s,u,Z){this.centerService=n,this.accountingServ=s,this.formBuilder=u,this.toastr=Z,this.centers=[],this.viewMode="list",this.subscriptions=[]}ngOnInit(){this.sessionify(),this.getCenters()}sessionify(){const n=this.accountingServ.center$.subscribe(s=>{this.currentCenter=s});this.subscriptions.push(n)}buildForm(){const n=this.currentCenter;this.centerForm=this.formBuilder.group({centerId:[(null==n?void 0:n.centerId)||0,[]],name:[(null==n?void 0:n.name)||"",[d.kI.required,d.kI.maxLength(30)]],description:[(null==n?void 0:n.description)||"",[d.kI.maxLength(255)]],isCostCenter:[(null==n?void 0:n.isCostCenter)||null]})}ngOnDestroy(){this.subscriptions.forEach(n=>{n&&n.unsubscribe()})}getCenters(){this.centerService.index().subscribe(n=>{this.centers=n})}openAdd(){this.currentCenter=null,this.buildForm(),this.viewMode="create"}openEdit(n){this.currentCenter=n,this.buildForm(),this.viewMode="edit"}openList(){this.viewMode="list",this.getCenters()}saveCenter(){if(!this.centerForm.valid)return void this.toastr.error("Formulaire invalide. Veuillez modififier svp.");const n=this.centerForm.value,s=new y.Xg;s.init(n),"create"===this.viewMode?this.createCenter(s):"edit"===this.viewMode&&this.editCenter(s)}createCenter(n){this.centerService.create(n).subscribe(s=>{const u=new y.Xg(s);this.centers.push(u),this.viewMode="list",this.toastr.success("Action effectu\xe9e avec succ\xe8s")},s=>{this.toastr.error("Une erreur est survenue lors de la cr\xe9ation du centre")})}editCenter(n){this.centerService.edit(n.centerId,n).subscribe(()=>{const s=this.centers.findIndex(u=>u.centerId===n.centerId);-1!==s&&(this.centers[s]=n),this.viewMode="list",this.toastr.success("Action effectu\xe9e avec succ\xe8s")},s=>{this.toastr.error("Une erreur est survenue lors de la modification du centre")})}select(n){this.accountingServ.loadCenter(n.centerId),this.viewMode="details"}unselect(){this.accountingServ.unloadCenter(),this.openList()}deleteCenter(n){this.viewMode="delete",this.centerService.delete(n).subscribe(()=>{this.centers=this.centers.filter(s=>s.centerId!==n),this.unselect()},s=>{this.toastr.error("Veuillez r\xe9essayer plus tard!"),console.error(s)})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(y.BL),e.Y36(b.e),e.Y36(d.qu),e.Y36(Y._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-center"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"card-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mt-2","row"],["for","name",1,"col-md-4","text-end"],[1,"col-md-8"],["type","text","id","name","formControlName","name",1,"form-control","form-control-sm"],["for","description",1,"col-md-4","text-end"],["id","description","formControlName","description",1,"form-control","form-control-sm"],["for","isCostCenter",1,"col-md-4","text-end"],[1,"me-2"],["type","radio","id","isCostCenter","name","isCostCenter","formControlName","isCostCenter",1,"me-2",3,"value","checked"],[1,"form-group","mt-4","row"],[1,"offset-md-4","col-md-8"],["type","submit",1,"btn","btn-sm","btn-outline-secondary","ms-2",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","submit",1,"btn","btn-sm","btn-success",3,"disabled"],[1,"table"],["type","button","title","Cr\xe9er un centre",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"fa","fa-plus"],[4,"ngFor","ngForOf"],["title","S\xe9lectionner",1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"text-center"],["title","Supprimer",1,"btn","btn-danger","btn-sm","ms-2",3,"click"],[1,"fa","fa-times"],["for","centerId",1,"col-md-4","text-end"],["type","submit",1,"btn","btn-sm","btn-outline-warning",3,"click"]],template:function(n,s){1&n&&(e.TgZ(0,"h4"),e._uU(1,"CENTRES"),e.qZA(),e._UZ(2,"hr"),e.YNc(3,ne,35,10,"ng-container",0),e.YNc(4,se,19,1,"ng-container",0),e.YNc(5,pe,8,2,"ng-container",0)),2&n&&(e.xp6(3),e.Q6J("ngIf","create"===s.viewMode||"edit"===s.viewMode),e.xp6(1),e.Q6J("ngIf","list"===s.viewMode),e.xp6(1),e.Q6J("ngIf","details"===s.viewMode))},dependencies:[x.sg,x.O5,d._Y,d.Fj,d._,d.JJ,d.JL,d.sg,d.u]}),o})();function ge(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2),e.qZA(),e.BQk()),2&o){const n=e.oxw();e.xp6(2),e.Oqu(n.currentJournal.name)}}function fe(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",18),e.qZA())}function ve(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",19),e.qZA())}function Ce(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2),e.YNc(3,fe,2,0,"span",5),e.YNc(4,ve,2,0,"span",5),e.qZA(),e.BQk()),2&o){const n=e.oxw();e.xp6(2),e.hij("",n.currentPeriod.name," "),e.xp6(1),e.Q6J("ngIf",n.currentPeriod&&n.currentPeriod.isClosed),e.xp6(1),e.Q6J("ngIf",n.currentPeriod&&!n.currentPeriod.isClosed)}}function he(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",7),e.qZA())}function Ze(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",20),e.qZA())}function xe(o,l){if(1&o){const n=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"app-period"),e.qZA(),e.TgZ(2,"div",22)(3,"button",23),e.NdJ("click",function(){const Z=e.CHM(n).dismiss;return e.KtG(Z("Cross click"))}),e._uU(4,"Terminer"),e.qZA()()}}function ye(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2),e.qZA(),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("title",n.currentCurrency.name),e.xp6(1),e.Oqu(n.currentCurrency.code)}}function Te(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",7),e.qZA())}function be(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",25),e.qZA())}function Ae(o,l){if(1&o){const n=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"app-currency-crud"),e.qZA(),e.TgZ(2,"div",22)(3,"button",23),e.NdJ("click",function(){const Z=e.CHM(n).dismiss;return e.KtG(Z("Cross click"))}),e._uU(4,"Terminer"),e.qZA()()}}function Ue(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"span",24),e._uU(2),e.qZA(),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("title",n.currentCenter.name),e.xp6(1),e.Oqu(n.currentCenter.name||n.currentCenter.centerId)}}function Ie(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",7),e.qZA())}function Ee(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"i",26),e.qZA())}function Me(o,l){if(1&o){const n=e.EpF();e.TgZ(0,"div",21),e._UZ(1,"app-center"),e.qZA(),e.TgZ(2,"div",22)(3,"button",23),e.NdJ("click",function(){const Z=e.CHM(n).dismiss;return e.KtG(Z("Cross click"))}),e._uU(4,"Terminer"),e.qZA()()}}function Fe(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"a",27),e._UZ(2,"i"),e._uU(3),e.qZA(),e._uU(4," |\n"),e.BQk()),2&o){const n=l.$implicit;e.xp6(1),e.Q6J("routerLink",n.route),e.xp6(1),e.Tol(n.icon),e.xp6(1),e.hij(" ",n.text," ")}}const qe=[{path:"",redirectTo:"journals",pathMatch:"full"},{path:"",component:(()=>{class o{constructor(n,s,u,Z){this.accountingServ=n,this.journalSession=s,this.navigationServ=u,this.modalService=Z,this.subs=[],this.navs=[]}ngOnInit(){this.sessionify()}sessionify(){const n=this.navigationServ.navs$.subscribe(N=>{N.forEach((Pe,Oe)=>{var G;"accounting"===Pe.name&&this.navigationServ.updateNav((null===(G=N[Oe])||void 0===G?void 0:G.children)||[])})});this.subs.push(n);const s=this.navigationServ.navs$.subscribe(N=>{this.navs=N});this.subs.push(s);const u=this.accountingServ.period$.subscribe(N=>{this.currentPeriod=N});this.subs.push(u);const Z=this.accountingServ.currency$.subscribe(N=>{this.currentCurrency=N});this.subs.push(Z);const S=this.accountingServ.center$.subscribe(N=>{this.currentCenter=N});this.subs.push(S);const K=this.journalSession.journal$.subscribe(N=>{this.currentJournal=N});this.subs.push(K)}openSelectPeiod(n){this.modalService.open(n)}openSelectCurrency(n){this.modalService.open(n,{size:"xl"})}openSelectCenter(n){this.modalService.open(n)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(b.e),e.Y36(t.l),e.Y36(r.f),e.Y36(a.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-accounting"]],decls:52,vars:11,consts:[[1,"card","card-body","p-1"],[1,"row"],[1,"col-md-3"],[1,"text-center"],[1,"btn-group"],[4,"ngIf"],["routerLink","/accounting/journals",1,"btn","btn-sm","btn-light","ms-2"],[1,"fa","fa-edit"],[1,"card","card-body","p-1",3,"click"],["title","S\xe9lectionner p\xe9riode","type","button",1,"btn","btn-sm","btn-light","ms2"],["periodContent",""],["title","S\xe9lectionner devise","type","button",1,"btn","btn-sm","btn-light","ms2"],["content",""],["title","S\xe9lectionner centre","type","button",1,"btn","btn-sm","btn-light","ms2"],["centerContent",""],[1,"card","card-body"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm"],[1,"fa","fa-lock"],[1,"fa","fa-unlock"],[1,"fa","fa-calendar"],[1,"modal-body"],[1,"modal-footer"],["type","button","aria-label","Close",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"btn","btn-sm",3,"title"],[1,"fa","fa-money"],[1,"fa","fa-home"],["routerLinkActive","active",3,"routerLink"]],template:function(n,s){if(1&n){const u=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",0)(4,"div",3)(5,"strong"),e._uU(6,"Journal"),e.qZA()(),e.TgZ(7,"div",4),e.YNc(8,ge,3,1,"ng-container",5),e.TgZ(9,"a",6),e._UZ(10,"i",7),e.qZA()()()(),e.TgZ(11,"div",2)(12,"div",8),e.NdJ("click",function(){e.CHM(u);const S=e.MAs(22);return e.KtG(s.openSelectPeiod(S))}),e.TgZ(13,"div",3)(14,"strong"),e._uU(15,"Exercice"),e.qZA()(),e.TgZ(16,"div",4),e.YNc(17,Ce,5,3,"ng-container",5),e.TgZ(18,"button",9),e.YNc(19,he,2,0,"span",5),e.YNc(20,Ze,2,0,"span",5),e.qZA()()(),e.YNc(21,xe,5,0,"ng-template",null,10,e.W1O),e.qZA(),e.TgZ(23,"div",2)(24,"div",8),e.NdJ("click",function(){e.CHM(u);const S=e.MAs(34);return e.KtG(s.openSelectCurrency(S))}),e.TgZ(25,"div",3)(26,"strong"),e._uU(27,"D\xe9vise"),e.qZA()(),e.TgZ(28,"div",4),e.YNc(29,ye,3,2,"ng-container",5),e.TgZ(30,"button",11),e.YNc(31,Te,2,0,"span",5),e.YNc(32,be,2,0,"span",5),e.qZA()()(),e.YNc(33,Ae,5,0,"ng-template",null,12,e.W1O),e.qZA(),e.TgZ(35,"div",2)(36,"div",8),e.NdJ("click",function(){e.CHM(u);const S=e.MAs(46);return e.KtG(s.openSelectCenter(S))}),e.TgZ(37,"div",3)(38,"strong"),e._uU(39,"Centre"),e.qZA()(),e.TgZ(40,"div",4),e.YNc(41,Ue,3,2,"ng-container",5),e.TgZ(42,"button",13),e.YNc(43,Ie,2,0,"span",5),e.YNc(44,Ee,2,0,"span",5),e.qZA()()(),e.YNc(45,Me,5,0,"ng-template",null,14,e.W1O),e.qZA()()(),e.TgZ(47,"div",15),e._UZ(48,"router-outlet"),e.qZA(),e._UZ(49,"hr"),e._uU(50,"Theopos :: Comptabilit\xe9 :\n"),e.YNc(51,Fe,5,4,"ng-container",16)}2&n&&(e.xp6(8),e.Q6J("ngIf",s.currentJournal),e.xp6(9),e.Q6J("ngIf",s.currentPeriod),e.xp6(2),e.Q6J("ngIf",s.currentPeriod),e.xp6(1),e.Q6J("ngIf",!s.currentPeriod),e.xp6(9),e.Q6J("ngIf",s.currentCurrency),e.xp6(2),e.Q6J("ngIf",s.currentCurrency),e.xp6(1),e.Q6J("ngIf",!s.currentCurrency),e.xp6(9),e.Q6J("ngIf",s.currentCenter),e.xp6(2),e.Q6J("ngIf",s.currentCenter),e.xp6(1),e.Q6J("ngIf",!s.currentCenter),e.xp6(7),e.Q6J("ngForOf",s.navs))},dependencies:[x.sg,x.O5,h.lC,h.yS,h.Od,E.E,H,me]}),o})(),children:[{path:"coa",title:"Plan comptable",loadChildren:()=>Promise.all([c.e(592),c.e(693)]).then(c.bind(c,5693)).then(o=>o.ChartOfAccountsModule)},{path:"journals",title:"Journaux des \xe9critures",loadChildren:()=>c.e(187).then(c.bind(c,6187)).then(o=>o.JournalsModule)},{path:"gl",title:"Grand livre",loadChildren:()=>c.e(667).then(c.bind(c,1667)).then(o=>o.GeneralLedgerModule)},{path:"tb",title:"Balance g\xe9n\xe9rale",loadChildren:()=>Promise.all([c.e(592),c.e(558)]).then(c.bind(c,9558)).then(o=>o.TrialBalanceModule)},{path:"subledgers",title:"Balances auxiliaires",loadChildren:()=>c.e(859).then(c.bind(c,2859)).then(o=>o.SubLedgersModule)},{path:"fs",title:"\xc9tats financiers",loadChildren:()=>c.e(116).then(c.bind(c,3116)).then(o=>o.FinancialStatementsModule)},{path:"currencies",title:"D\xe9vises",loadChildren:()=>Promise.resolve().then(c.bind(c,489)).then(o=>o.CurrencyModule)},{path:"periods",title:"Exercices comptables",component:H},{path:"masterdata",title:"Param\xe8tres",loadChildren:()=>c.e(428).then(c.bind(c,1428)).then(o=>o.MasterdataModule)}]}];let De=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(qe),h.Bz]}),o})();var Je=c(489);let Se=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[x.ez,De,v.m,Je.CurrencyModule]}),o})()},1656:(Q,D,c)=>{"use strict";c.d(D,{E:()=>B});var v=c(2382),x=c(4327),b=c(2291),t=c(1223),r=c(2826),a=c(2290),h=c(9808);function E(_,F){1&_&&(t.TgZ(0,"div",17),t._uU(1,"D\xe9signation requise."),t.qZA())}function g(_,F){if(1&_&&(t.TgZ(0,"div"),t.YNc(1,E,2,0,"div",16),t.qZA()),2&_){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.name.errors.required)}}function d(_,F){1&_&&(t.TgZ(0,"div",17),t._uU(1,"Identifiant requis."),t.qZA())}function y(_,F){if(1&_&&(t.TgZ(0,"div"),t.YNc(1,d,2,0,"div",16),t.qZA()),2&_){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.currencyId.errors.required)}}function f(_,F){1&_&&(t.TgZ(0,"div",17),t._uU(1,"Le code est requis."),t.qZA())}function A(_,F){if(1&_&&(t.TgZ(0,"div"),t.YNc(1,f,2,0,"div",16),t.qZA()),2&_){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.code.errors.required)}}function Y(_,F){1&_&&(t.TgZ(0,"div",17),t._uU(1,"L'identifiant code est requis."),t.qZA())}function L(_,F){if(1&_&&(t.TgZ(0,"div"),t.YNc(1,Y,2,0,"div",16),t.qZA()),2&_){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.currencyId.errors.required)}}function M(_,F){1&_&&(t.TgZ(0,"div",17),t._uU(1,"Le symb\xf4le est requis."),t.qZA())}function J(_,F){if(1&_&&(t.TgZ(0,"div"),t.YNc(1,M,2,0,"div",16),t.qZA()),2&_){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.symbol.errors.required)}}function p(_,F){if(1&_&&(t.ynx(0),t.TgZ(1,"button",18),t._uU(2,"Cr\xe9er"),t.qZA(),t.BQk()),2&_){const i=t.oxw(2);t.xp6(1),t.Q6J("disabled",i.currencyForm.invalid)}}function m(_,F){if(1&_&&(t.ynx(0),t.TgZ(1,"button",18),t._uU(2,"Sauvegarder"),t.qZA(),t.BQk()),2&_){const i=t.oxw(2);t.xp6(1),t.Q6J("disabled",i.currencyForm.invalid)}}function C(_,F){if(1&_){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){t.CHM(i);const I=t.oxw();return t.KtG(I.saveCurrency())}),t.TgZ(3,"div")(4,"div",3)(5,"label",4),t._uU(6,"D\xe9signation"),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"input",6),t.YNc(9,g,2,1,"div",0),t.qZA()(),t.TgZ(10,"div",3)(11,"label",4),t._uU(12,"Identifiant"),t.qZA(),t.TgZ(13,"div",5),t._UZ(14,"input",7),t.YNc(15,y,2,1,"div",0),t.qZA()(),t.TgZ(16,"div",3)(17,"label",8),t._uU(18,"Code ISO"),t.qZA(),t.TgZ(19,"div",5),t._UZ(20,"input",9),t.YNc(21,A,2,1,"div",0),t.qZA()(),t.TgZ(22,"div",3)(23,"label",10),t._uU(24,"R\xe9f\xe9rence"),t.qZA(),t.TgZ(25,"div",5)(26,"label"),t._UZ(27,"input",11),t._uU(28),t.qZA(),t.YNc(29,L,2,1,"div",0),t.qZA()(),t.TgZ(30,"div",3)(31,"label",12),t._uU(32,"Symb\xf4le"),t.qZA(),t.TgZ(33,"div",5),t._UZ(34,"input",13),t.YNc(35,J,2,1,"div",0),t.qZA()(),t.TgZ(36,"div",3)(37,"div",14),t.YNc(38,p,3,1,"ng-container",0),t.YNc(39,m,3,1,"ng-container",0),t.TgZ(40,"button",15),t.NdJ("click",function(){t.CHM(i);const I=t.oxw();return t.KtG(I.openList())}),t._uU(41,"Retourner"),t.qZA()()()()()(),t.BQk()}if(2&_){const i=t.oxw();t.xp6(2),t.Q6J("formGroup",i.currencyForm),t.xp6(7),t.Q6J("ngIf",i.currencyForm.controls.name.invalid&&(i.currencyForm.controls.name.dirty||i.currencyForm.controls.name.touched)),t.xp6(6),t.Q6J("ngIf",i.currencyForm.controls.currencyId.invalid&&(i.currencyForm.controls.currencyId.dirty||i.currencyForm.controls.currencyId.touched)),t.xp6(6),t.Q6J("ngIf",i.currencyForm.controls.code.invalid&&(i.currencyForm.controls.code.dirty||i.currencyForm.controls.code.touched)),t.xp6(7),t.hij(" ",i.currencyForm.controls.isReference.value?"Oui":"Non",""),t.xp6(1),t.Q6J("ngIf",i.currencyForm.controls.currencyId.invalid&&(i.currencyForm.controls.currencyId.dirty||i.currencyForm.controls.currencyId.touched)),t.xp6(6),t.Q6J("ngIf",i.currencyForm.controls.symbol.invalid&&(i.currencyForm.controls.symbol.dirty||i.currencyForm.controls.symbol.touched)),t.xp6(3),t.Q6J("ngIf","create"===i.viewMode),t.xp6(1),t.Q6J("ngIf","edit"===i.viewMode)}}function q(_,F){if(1&_){const i=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"button",23),t.NdJ("click",function(){const P=t.CHM(i).$implicit,R=t.oxw(2);return t.KtG(R.select(P))}),t._UZ(3,"i",24),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td",25)(15,"button",26),t.NdJ("click",function(){const P=t.CHM(i).$implicit,R=t.oxw(2);return t.KtG(R.deleteCurrency(P.currencyId))}),t._UZ(16,"i",27),t.qZA()()()}if(2&_){const i=F.$implicit;t.xp6(5),t.Oqu(i.code),t.xp6(2),t.Oqu(i.name),t.xp6(2),t.Oqu(i.currencyId),t.xp6(2),t.Oqu(i.symbol),t.xp6(2),t.Oqu(i.isReference?"Oui":"Non")}}function U(_,F){if(1&_){const i=t.EpF();t.ynx(0),t.TgZ(1,"table",19)(2,"thead")(3,"tr"),t._UZ(4,"th"),t.TgZ(5,"th"),t._uU(6,"Code"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"D\xe9signation"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"ID"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Symb\xf4le"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"R\xe9f\xe9rence"),t.qZA(),t.TgZ(15,"th")(16,"button",20),t.NdJ("click",function(){t.CHM(i);const I=t.oxw();return t.KtG(I.openAdd())}),t._UZ(17,"i",21),t.qZA()()()(),t.TgZ(18,"tbody"),t.YNc(19,q,17,5,"tr",22),t.qZA()(),t.BQk()}if(2&_){const i=t.oxw();t.xp6(19),t.Q6J("ngForOf",i.currencies)}}function O(_,F){if(1&_&&(t.ynx(0),t.TgZ(1,"div",3)(2,"label",4),t._uU(3,"D\xe9signation"),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.qZA()(),t.TgZ(6,"div",3)(7,"label",8),t._uU(8,"Code"),t.qZA(),t.TgZ(9,"div",5),t._uU(10),t.qZA()(),t.TgZ(11,"div",3)(12,"label",28),t._uU(13,"Identifiant"),t.qZA(),t.TgZ(14,"div",5),t._uU(15),t.qZA()(),t.TgZ(16,"div",3)(17,"label",4),t._uU(18,"Symb\xf4le"),t.qZA(),t.TgZ(19,"div",5),t._uU(20),t.qZA()(),t.BQk()),2&_){const i=t.oxw(2);t.xp6(5),t.Oqu(i.currentCurrency.name),t.xp6(5),t.Oqu(i.currentCurrency.code),t.xp6(5),t.Oqu(i.currentCurrency.currencyId),t.xp6(5),t.Oqu(i.currentCurrency.symbol)}}function w(_,F){if(1&_){const i=t.EpF();t.ynx(0),t.TgZ(1,"button",29),t.NdJ("click",function(){t.CHM(i);const I=t.oxw(2);return t.KtG(I.openEdit())}),t._uU(2,"Editer"),t.qZA(),t.BQk()}}function k(_,F){if(1&_){const i=t.EpF();t.ynx(0),t.TgZ(1,"div"),t.YNc(2,O,21,4,"ng-container",0),t.TgZ(3,"div",3)(4,"div",14),t.YNc(5,w,3,0,"ng-container",0),t.TgZ(6,"button",15),t.NdJ("click",function(){t.CHM(i);const I=t.oxw();return t.KtG(I.openList())}),t._uU(7,"Retourner"),t.qZA()()()(),t.BQk()}if(2&_){const i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.currentCurrency),t.xp6(3),t.Q6J("ngIf",i.currentCurrency)}}let B=(()=>{class _{constructor(i,T,I,P){this.currencyService=i,this.accountingSession=T,this.formBuilder=I,this.toastr=P,this.currencies=[],this.viewMode="list",this.subscriptions=[],this.pageSize=0,this.pageCount=20,this.keyword="",this.buildForm()}buildForm(){const i=this.currentCurrency;this.currencyForm=this.formBuilder.group({currencyId:[(null==i?void 0:i.currencyId)||"",[]],isReference:[(null==i?void 0:i.isReference)||!1,[]],code:[(null==i?void 0:i.code)||"",[v.kI.required,v.kI.maxLength(3)]],name:[(null==i?void 0:i.name)||"",[v.kI.required,v.kI.maxLength(30)]],symbol:[(null==i?void 0:i.symbol)||"",[v.kI.maxLength(3)]],isActive:[(null==i?void 0:i.isActive)||!1]})}ngOnInit(){this.getCurrencies(),this.sessionify()}ngOnDestroy(){this.subscriptions.forEach(i=>{i&&i.unsubscribe()})}sessionify(){const i=this.accountingSession.currency$.subscribe(T=>{this.currentCurrency=T,this.buildForm()});this.subscriptions.push(i)}getCurrencies(){this.currencyService.index(void 0,this.keyword,this.pageSize,this.pageCount,"").subscribe(i=>{this.currencies=i})}openAdd(){this.currentCurrency=null,this.buildForm(),this.viewMode="create"}openEdit(){this.buildForm(),this.viewMode="edit"}openList(){this.viewMode="list",this.getCurrencies()}select(i){this.viewMode="details",this.accountingSession.loadCurrency(i.currencyId)}unselect(){this.accountingSession.unloadCurrency(),this.openList()}saveCurrency(){const i=this.currencyForm.value,T=new b.$C;T.init(i),"create"===this.viewMode&&this.currencyService.create(T).subscribe(I=>{this.toastr.success("Action effectu\xe9e avec succ\xe8s");const P=new b.$C;P.init(I),this.currencies.push(P),this.select(P)}),"edit"===this.viewMode&&this.currencyService.edit(T.currencyId,T).subscribe(I=>{this.toastr.success("Action effectu\xe9e avec succ\xe8s");const P=this.currencies.findIndex(R=>R.currencyId===I.currencyId);-1!==P&&(this.currencies[P]=I,this.currentCurrency=new b.GI,this.currentCurrency.init(this.currencies[P])),this.viewMode="list"})}deleteCurrency(i){this.viewMode="delete",this.currencyService.delete(i).subscribe(T=>{this.currencies=this.currencies.filter(I=>I.currencyId!==i),this.toastr.success("Action effectu\xe9e avec succ\xe8s"),this.unselect(),this.openList()},T=>{this.toastr.error("Veuillez r\xe9essayer plus tard!"),console.error(T)})}download(i=0,T=20){this.currencyService.download(i,T,"csv").subscribe(I=>{(0,x.saveAs)(I.data,I.fileName||"currency-template.csv")})}upload(i){const T=i.target;if(T.files&&T.files.length>0){const I=T.files[0];this.currencyService.bulkCreate({data:I,fileName:I.name}).subscribe(R=>{this.toastr.success("Action effectu\xe9e avec succ\xe8s."),this.openList()})}}}return _.\u0275fac=function(i){return new(i||_)(t.Y36(b.sV),t.Y36(r.e),t.Y36(v.qu),t.Y36(a._W))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-currency-crud"]],decls:6,vars:3,consts:[[4,"ngIf"],[1,"card-card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mt-2","row"],["for","name",1,"col-md-4","text-end"],[1,"col-md-8"],["type","text","id","name","formControlName","name",1,"form-control","form-control-sm"],["type","text","id","currencyId","formControlName","currencyId",1,"form-control","form-control-sm"],["for","code",1,"col-md-4","text-end"],["type","text","id","code","formControlName","code",1,"form-control","form-control-sm"],["for","isReference",1,"col-md-4","text-end"],["type","checkbox","id","isReference","formControlName","isReference",1,"me-2"],["for","symbol",1,"col-md-4","text-end"],["type","text","id","symbol","formControlName","symbol",1,"form-control","form-control-sm"],[1,"offset-md-4","col-md-8"],["type","submit",1,"btn","btn-sm","btn-outline-secondary","ms-2",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","submit",1,"btn","btn-sm","btn-success",3,"disabled"],[1,"table"],["type","button","title","Cr\xe9er une devise",1,"btn","btn-sm","btn-outline-success",3,"click"],[1,"fa","fa-plus"],[4,"ngFor","ngForOf"],["type","button","title","S\xe9lectionner",1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"text-center"],["title","Supprimer",1,"btn","btn-danger","btn-sm","ms-2",3,"click"],[1,"fa","fa-times"],["for","currencyId",1,"col-md-4","text-end"],["type","submit",1,"btn","btn-sm","btn-outline-warning",3,"click"]],template:function(i,T){1&i&&(t.TgZ(0,"h4"),t._uU(1,"DEVISES"),t.qZA(),t._UZ(2,"hr"),t.YNc(3,C,42,9,"ng-container",0),t.YNc(4,U,20,1,"ng-container",0),t.YNc(5,k,8,2,"ng-container",0)),2&i&&(t.xp6(3),t.Q6J("ngIf","create"===T.viewMode||"edit"===T.viewMode),t.xp6(1),t.Q6J("ngIf","list"===T.viewMode),t.xp6(1),t.Q6J("ngIf","details"===T.viewMode))},dependencies:[h.sg,h.O5,v._Y,v.Fj,v.Wl,v.JJ,v.JL,v.sg,v.u]}),_})()},7501:(Q,D,c)=>{"use strict";c.d(D,{H:()=>L});var v=c(5439),e=c(8372),b=c(2291),t=c(7418),r=c(1223),a=c(2382),h=c(2290),E=c(1230),g=c(9808);function d(M,J){if(1&M&&(r.TgZ(0,"option",22),r._uU(1),r.qZA()),2&M){const p=J.$implicit;r.Q6J("value",p.currencyId),r.xp6(1),r.Oqu(p.name)}}function y(M,J){if(1&M&&(r.TgZ(0,"th"),r._uU(1),r.qZA()),2&M){const p=J.$implicit;r.xp6(1),r.hij(" 1 ",p.code,"")}}function f(M,J){if(1&M){const p=r.EpF();r.TgZ(0,"td")(1,"div",24)(2,"span",25),r._uU(3),r.qZA(),r.TgZ(4,"input",26),r.NdJ("ngModelChange",function(C){const U=r.CHM(p).$implicit,O=r.oxw().$implicit;return r.KtG(O[U.code]=C)}),r.qZA(),r.TgZ(5,"span",25),r._uU(6),r.qZA()()()}if(2&M){const p=J.$implicit,m=r.oxw().$implicit,C=r.oxw();r.xp6(3),r.hij("1 ",p.code," ="),r.xp6(1),r.Q6J("ngModel",m[p.code]),r.xp6(2),r.AsE("",null==C.selectedCurrency?null:C.selectedCurrency.code,"(",null==C.selectedCurrency?null:C.selectedCurrency.symbol,")")}}function A(M,J){if(1&M&&(r.TgZ(0,"tr",23)(1,"td"),r._uU(2),r.ALo(3,"date"),r.qZA(),r.YNc(4,f,7,4,"td",19),r.qZA()),2&M){const p=J.$implicit,m=J.index,C=r.oxw();r.Q6J("id","row-"+m),r.xp6(2),r.Oqu(r.xi3(3,3,p.day,C.settings.dateFormat)),r.xp6(2),r.Q6J("ngForOf",C.baseCurrencies)}}function Y(M,J){if(1&M){const p=r.EpF();r.ynx(0),r.TgZ(1,"div",27)(2,"div",4)(3,"div",28)(4,"button",29),r.NdJ("click",function(){r.CHM(p);const C=r.oxw();return r.KtG(C.saveChanges())}),r._UZ(5,"i",30),r._uU(6," Save Changes"),r.qZA()(),r.TgZ(7,"div",31)(8,"button",32),r.NdJ("click",function(){r.CHM(p);const C=r.oxw();return r.KtG(C.exportExcel())}),r._UZ(9,"i",33),r._uU(10," Export Excel"),r.qZA()()()(),r.BQk()}}let L=(()=>{class M{constructor(p,m,C,q,U){this.ratesService=p,this.currenciesService=m,this.fb=C,this.toastr=q,this.activeModal=U,this.rates=[],this.allCurrencies=[],this.baseCurrencies=[],this.refCurrencies=[],this.matrix=[],this.settings=t.X,this.subs=[]}ngAfterViewInit(){this.rate||(this.rate=new b.KH,this.rate.init({day:v(new Date)}));const p=this.rateForm.get("day");null==p||p.setValue(this.rate.day.format("YYYY-MM-DD")),null==p||p.updateValueAndValidity()}ngOnDestroy(){this.subs.forEach(p=>{p.unsubscribe()})}ngOnInit(){this.loadCurrencies(),this.buildForm()}buildForm(){var p,m;this.rateForm=this.fb.group({idTargetCurrency:[""],day:[""]}),null===(p=this.rateForm.get("idTargetCurrency"))||void 0===p||p.valueChanges.pipe((0,e.b)(200)).subscribe(C=>{const q=+C;this.selectedCurrency=this.refCurrencies.find(U=>U.currencyId===+q),this.baseCurrencies=this.allCurrencies.filter(U=>U.currencyId!==q),this.loadRates()}),null===(m=this.rateForm.get("day"))||void 0===m||m.valueChanges.pipe((0,e.b)(1e3)).subscribe(C=>{this.loadRates()})}loadCurrencies(){const p=this.currenciesService.index().subscribe(m=>{var C,q;this.allCurrencies=m,this.refCurrencies=m.filter(U=>!0===U.isReference),null===(C=this.rateForm.get("idTargetCurrency"))||void 0===C||C.setValue(null===(q=this.refCurrencies[0])||void 0===q?void 0:q.currencyId)});this.subs.push(p)}loadRates(){var p,m;this.rates=[];const C=null===(p=this.rateForm.get("day"))||void 0===p?void 0:p.value;this.selectedDay=v(C),this.selectedCurrency&&this.selectedDay?this.ratesService.findRates(null===(m=this.selectedCurrency)||void 0===m?void 0:m.currencyId,this.selectedDay).subscribe(q=>{this.rates=q,this.buildMatrix();const U=this.matrix.findIndex(O=>v(O.day).isSame(this.selectedDay,"day"));if(-1!==U){const w=document.getElementById(`row-${U}`);w&&w.scrollIntoView({behavior:"smooth"})}}):this.buildMatrix()}buildMatrix(){if(this.matrix=[],!this.selectedCurrency||!this.selectedDay)return;const p=this.selectedDay.year(),m=this.selectedDay.month(),C=new Date(p,m,1),q=new Date(C.getTime());q.setMonth(q.getMonth()+1);let U=new Date(C.getTime());for(;U<q;){const O={};O.day=v(U),this.baseCurrencies.forEach(w=>{var k;if(w.currencyId!==(null===(k=this.selectedCurrency)||void 0===k?void 0:k.currencyId)){const B=this.rates.find(_=>{var F;return _.idBaseCurrency===w.currencyId&&_.idTargetCurrency===(null===(F=this.selectedCurrency)||void 0===F?void 0:F.currencyId)&&v(_.day).isSame(v(U),"day")});O[w.code]=B?B.rateValue:""}}),this.matrix.push(O),U=new Date(U.getTime()),U=v(U).add(1,"days").toDate()}}saveChanges(){const p=[];this.matrix.forEach(m=>{const C=v(m.day);this.baseCurrencies.forEach(q=>{var U;const O=(null===(U=this.selectedCurrency)||void 0===U?void 0:U.currencyId)||0,w=q.currencyId||0,k=m[q.code];if(k&&O!=w){const B=new b.KH;B.init({idTargetCurrency:O,idBaseCurrency:w,day:C,rateValue:k}),p.push(B)}})}),this.ratesService.edit(p).subscribe(m=>{var C;this.toastr.success("Action effectu\xe9e avec succ\xe8s"),null===(C=this.activeModal)||void 0===C||C.close(this.rate)})}exportExcel(){console.log("Exporting Excel...")}importExcel(){console.log("Importing Excel...")}}return M.\u0275fac=function(p){return new(p||M)(r.Y36(b.Cp),r.Y36(b.sV),r.Y36(a.qu),r.Y36(h._W),r.Y36(E.Kz,8))},M.\u0275cmp=r.Xpm({type:M,selectors:[["app-currency-rates"]],inputs:{rate:"rate"},decls:37,vars:6,consts:[[1,"p-4"],[1,"card-title","text-uppercase"],[1,"card","card-body"],[3,"formGroup"],[1,"row"],[1,"form-group","col"],["for","idTargetCurrency"],["id","idTargetCurrency","formControlName","idTargetCurrency",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["for","day"],["type","date","id","day","formControlName","day",1,"form-control","form-control-sm"],["for","action"],["type","button",1,"btn","btn-sm","btn-outline-info",3,"click"],[1,"fa","fa-refresh"],[1,"form-group","col","text-end","pt-2"],["type","button","title","Importer",1,"btn","border","btn-sm","btn-light","ms-2",3,"click"],[1,"fa","fa-file-excel-o"],[1,"matrix","mt-1",2,"max-height","340px","overflow","hidden","overflow-y","auto"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[3,"id",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[3,"id"],[1,"input-group","input-group-sm"],[1,"input-group-text"],[1,"form-control","text-end",3,"ngModel","ngModelChange"],[1,"card","card-body","mt-1"],[1,"col","text-end"],["type","button",1,"btn","btn-success","me-2",3,"click"],[1,"fa","fa-save"],[1,"col-md-3","text-end"],["type","button",1,"btn","btn-light","border",3,"click"],[1,"fa","fa-download"]],template:function(p,m){1&p&&(r.TgZ(0,"div",0)(1,"h4",1),r._uU(2),r.qZA(),r.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"div")(8,"label",6),r._uU(9,"D\xe9vise"),r.qZA()(),r.TgZ(10,"select",7),r.YNc(11,d,2,2,"option",8),r.qZA()(),r.TgZ(12,"div",5)(13,"div")(14,"label",9),r._uU(15,"Jour"),r.qZA()(),r._UZ(16,"input",10),r.qZA(),r.TgZ(17,"div",5)(18,"div")(19,"label",11),r._uU(20,"Action"),r.qZA()(),r.TgZ(21,"button",12),r.NdJ("click",function(){return m.loadRates()}),r._UZ(22,"i",13),r._uU(23," Charger taux "),r.qZA()(),r.TgZ(24,"div",14)(25,"button",15),r.NdJ("click",function(){return m.importExcel()}),r._UZ(26,"i",16),r.qZA()()()()(),r.TgZ(27,"div",17)(28,"table",18)(29,"thead")(30,"tr")(31,"th"),r._uU(32,"Date"),r.qZA(),r.YNc(33,y,2,1,"th",19),r.qZA()(),r.TgZ(34,"tbody"),r.YNc(35,A,5,6,"tr",20),r.qZA()()(),r.YNc(36,Y,11,0,"ng-container",21),r.qZA()),2&p&&(r.xp6(2),r.hij("TAUX DE CHANGE ",null==m.selectedCurrency?null:m.selectedCurrency.code,""),r.xp6(2),r.Q6J("formGroup",m.rateForm),r.xp6(7),r.Q6J("ngForOf",m.refCurrencies),r.xp6(22),r.Q6J("ngForOf",m.baseCurrencies),r.xp6(2),r.Q6J("ngForOf",m.matrix),r.xp6(1),r.Q6J("ngIf",m.matrix&&m.matrix.length))},dependencies:[g.sg,g.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.On,a.sg,a.u,g.uU]}),M})()},489:(Q,D,c)=>{"use strict";c.r(D),c.d(D,{CurrencyModule:()=>g});var v=c(9808),x=c(9150),e=c(1223);let b=(()=>{class d{constructor(){this.subs=[]}ngOnInit(){}ngOnDestroy(){this.subs.forEach(f=>{f&&f.unsubscribe()})}}return d.\u0275fac=function(f){return new(f||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-currency"]],decls:3,vars:0,template:function(f,A){1&f&&(e._UZ(0,"router-outlet")(1,"hr"),e._uU(2,"DEVISES\n"))},dependencies:[x.lC]}),d})();var t=c(7501);const a=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"",component:b,children:[{path:"list",component:c(1656).E},{path:"rates",component:t.H}]}];let h=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[x.Bz.forChild(a),x.Bz]}),d})();var E=c(2611);let g=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[v.ez,h,E.m]}),d})()},2680:(Q,D,c)=>{"use strict";c.d(D,{l:()=>b});var v=c(1135),x=c(1223),e=c(2291);let b=(()=>{class t{constructor(a){this.journalsServ=a,this.journal$=new v.X(null),this.initialize()}initialize(){const a=localStorage.getItem("journal$");a&&this.loadJournal(+a)}setJournal(a){this.journal$.next(a),localStorage.setItem("journal$",((null==a?void 0:a.journalId)||"")+"")}loadJournal(a){a?this.journalsServ.details(a).subscribe(h=>{this.setJournal(h)}):this.unloadJournal()}unloadJournal(){this.setJournal(null)}}return t.\u0275fac=function(a){return new(a||t)(x.LFG(e.yJ))},t.\u0275prov=x.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9356:(Q,D,c)=>{"use strict";c.d(D,{v:()=>x});var v=c(1223);let x=(()=>{class e{transform(t,r){return t?t.format(r):"-"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=v.Yjl({name:"momentDate",type:e,pure:!0}),e})()},7418:(Q,D,c)=>{"use strict";c.d(D,{X:()=>v});const v={momentDateFormat:"DD/MM/yyyy",momentDateHourFormat:"DD/MM \xe0 HH:mm",dateFormat:"dd/MM/yyyy",dateHourFormat:"dd/MM hh:mm",dateHourFullFormat:"dd/MM/yyyy hh:mm",numberFormat:".2"}},4327:function(Q,D){var x;void 0!==(x=function(){"use strict";function b(g,d,y){var f=new XMLHttpRequest;f.open("GET",g),f.responseType="blob",f.onload=function(){E(f.response,d,y)},f.onerror=function(){console.error("could not download file")},f.send()}function t(g){var d=new XMLHttpRequest;d.open("HEAD",g,!1);try{d.send()}catch(y){}return 200<=d.status&&299>=d.status}function r(g){try{g.dispatchEvent(new MouseEvent("click"))}catch(y){var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(d)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,h=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),E=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(g,d,y){var f=a.URL||a.webkitURL,A=document.createElement("a");A.download=d=d||g.name||"download",A.rel="noopener","string"==typeof g?(A.href=g,A.origin===location.origin?r(A):t(A.href)?b(g,d,y):r(A,A.target="_blank")):(A.href=f.createObjectURL(g),setTimeout(function(){f.revokeObjectURL(A.href)},4e4),setTimeout(function(){r(A)},0))}:"msSaveOrOpenBlob"in navigator?function(g,d,y){if(d=d||g.name||"download","string"!=typeof g)navigator.msSaveOrOpenBlob(function e(g,d){return void 0===d?d={autoBom:!1}:"object"!=typeof d&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\ufeff",g],{type:g.type}):g}(g,y),d);else if(t(g))b(g,d,y);else{var f=document.createElement("a");f.href=g,f.target="_blank",setTimeout(function(){r(f)})}}:function(g,d,y,f){if((f=f||open("","_blank"))&&(f.document.title=f.document.body.innerText="downloading..."),"string"==typeof g)return b(g,d,y);var A="application/octet-stream"===g.type,Y=/constructor/i.test(a.HTMLElement)||a.safari,L=/CriOS\/[\d]+/.test(navigator.userAgent);if((L||A&&Y||h)&&"undefined"!=typeof FileReader){var M=new FileReader;M.onloadend=function(){var m=M.result;m=L?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=m:location=m,f=null},M.readAsDataURL(g)}else{var J=a.URL||a.webkitURL,p=J.createObjectURL(g);f?f.location=p:location.href=p,f=null,setTimeout(function(){J.revokeObjectURL(p)},4e4)}});a.saveAs=E.saveAs=E,Q.exports=E}.apply(D,[]))&&(Q.exports=x)},8372:(Q,D,c)=>{"use strict";c.d(D,{b:()=>b});var v=c(1566),x=c(4482),e=c(5403);function b(t,r=v.z){return(0,x.e)((a,h)=>{let E=null,g=null,d=null;const y=()=>{if(E){E.unsubscribe(),E=null;const A=g;g=null,h.next(A)}};function f(){const A=d+t,Y=r.now();if(Y<A)return E=this.schedule(void 0,A-Y),void h.add(E);y()}a.subscribe((0,e.x)(h,A=>{g=A,d=r.now(),E||(E=r.schedule(f,t),h.add(E))},()=>{y(),h.complete()},void 0,()=>{g=E=null}))})}}}]);